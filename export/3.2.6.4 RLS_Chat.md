---
id: 3.2.6.4
title: RLS Chat
parent: 3.2.6
breadcrumb: 0 → 3.0 → 3.2 → 3.2.6 → 3.2.6.4
type: hoja
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-05 12:40
domain:
- rls
- chat
- mensajes
actors:
- desarrollador
summary: Políticas RLS para tablas de chat y mensajería.
content_hash: 92af7ef40427d231
---

# 3.2.6.4 RLS Chat

> Policies para conversations, messages, participants.

---

## Políticas

```sql
-- Solo participantes ven conversaciones
CREATE POLICY "conversations_participant"
  ON conversations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM participants
      WHERE conversation_id = conversations.id
      AND user_id = auth.uid()
    )
  );

-- Solo participantes ven mensajes
CREATE POLICY "messages_participant"
  ON messages FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM participants
      WHERE conversation_id = messages.conversation_id
      AND user_id = auth.uid()
    )
  );
```

---

## Navegación

| ⬆️ Padre | [[Proyecto OnlyCarNLD/Datos/3.2.6 RLS_Policies_Completo]] |
|----------|-------------------------------|
| ⬅️ Anterior | [[Proyecto OnlyCarNLD/Datos/3.2.6.3 RLS_Pagos]] |

---
