---
id: 2.6.1.3
title: Push Notifications
parent: 2.6.1
breadcrumb: 0 → 2.0 → 2.6 → 2.6.1 → 2.6.1.3
type: especificacion
domain:
- push
- fcm
- notifications
- apns
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-05 03:30
summary: 'Implementación de notificaciones push nativas.

  Registro de tokens FCM/APNs y manejo de canales en Android.'
content_hash: 0a09665a9358a400
---

# 2.6.1.3 Push Notifications

> El canal directo para despertar al usuario.

---

## Flujo de Registro

```ts
// 1. Solicitar Permiso
const perm = await PushNotifications.requestPermissions();

// 2. Registrar en APNs/FCM
if (perm.receive === 'granted') {
  await PushNotifications.register();
}

// 3. Listener de Token
PushNotifications.addListener('registration', (token) => {
  // Guardar token.value en Supabase users table
  saveDeviceToken(user.id, token.value);
});
```

---

## Canales de Android (Notification Channels)

Desde Android 8.0, es obligatorio clasificar las notificaciones.

*   `channel_services`: "Servicio En Camino" (Importancia Alta, Sonido fuerte).
*   `channel_marketing`: "Promociones" (Importancia Baja, Silencioso).
*   `channel_chat`: "Mensajes" (Importancia Default, Vibración).

Esto se configura en `capacitor.config.ts` o dinámicamente vía plugin.

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.6.1 Plugins_Nativos]]       |
| -------------------- | ------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.6.1.2 Geolocation_Advanced]]|

---
