---
id: 3.1.12.4.1
title: Registro de Días
parent: 3.1.12.4
breadcrumb: 0 → 3.0 → 3.1 → 3.1.12 → 3.1.12.4 → 3.1.12.4.1
type: hoja
status: futuro
last_updated: 2026-01-29 15:32
file_create: 2026-01-24 11:38
domain:
- dias
- jornada
- registro
- cotizacion
actors:
- sistema
- operador
summary: Lógica para contabilizar días trabajados por operador y agruparlos en semanas
  cotizadas.
content_hash: bb0c89998d22ec4c
---

# 3.1.12.4.1 Registro de Días

> [!NOTE]
> **MÓDULO FUTURO** — Especificación del algoritmo de conteo de días laborados.

---

## Regla de Conteo

Un día se considera **laborado** si el operador:
1.  Completa **≥1 servicio** en ese día calendario.
2.  El servicio tiene estado `completado` (no cancelado).

```typescript
// Pseudocódigo
function contarDiaLaborado(operadorId: string, fecha: Date): boolean {
  const serviciosDelDia = await db.servicios
    .select('id')
    .eq('operador_id', operadorId)
    .eq('fecha', fecha)
    .eq('status', 'completado');
  
  return serviciosDelDia.length >= 1;
}
```

---

## Acumulación Semanal

```
7 días laborados = 1 semana cotizada
```

| Días Laborados en el Mes | Semanas Cotizadas |
|--------------------------|-------------------|
| 7 | 1 |
| 14 | 2 |
| 21 | 3 |
| 28+ | 4 |

---

## Tabla: `dias_laborados`

| Columna | Tipo | Descripción |
|---------|------|-------------|
| `id` | UUID | PK |
| `operador_id` | UUID | FK a operadores |
| `fecha` | Date | Día calendario |
| `servicios_completados` | Int | Cantidad de servicios ese día |
| `es_laborado` | Boolean | true si ≥1 servicio |

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/3.1.12.4 semanas_cotizadas]]       |
| -------------------- | ------------------------------------ |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.1.12.4.2 integracion_imss]]      |

---
