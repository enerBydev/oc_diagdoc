---
id: 1.2.2.1.7.3
title: Configuración de Período
parent: 1.2.2.1.7
breadcrumb: 0 → 1.0 → 1.2 → 1.2.2 → 1.2.2.1 → 1.2.2.1.7 → 1.2.2.1.7.3
type: hoja
status: activo
last_updated: 2026-01-29 15:32
file_create: 2025-12-27 00:33
domain:
- operador
- configuracion
- periodo_prueba
- admin
summary: 'Parámetros configurables del período de prueba via config_global.

  Servicios 5-100, rating 4.0, alerta 3.5, suspensión 3.0.

  '
content_hash: e8f00eae1537ad00
---

# 1.2.2.1.7.3 Configuración de Período

> Parámetros configurables del período de prueba.

---

## Configuración Remota

```sql
INSERT INTO config_global (key, value) VALUES
('periodo_prueba', '{
  "servicios_requeridos": 5,
  "min": 5,
  "max": 100,
  "rating_minimo": 4.0,
  "rating_alerta": 3.5,
  "rating_suspension": 3.0,
  "max_cancelaciones": 1
}'::JSONB);
```

---

## UI Admin: Configurar Período

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚙️ CONFIGURACIÓN: PERÍODO DE PRUEBA                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Servicios para consolidar:                                     │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  [  5  ]  servicios                                     │    │
│  │  Rango: 5 - 100                                         │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Rating mínimo para consolidar:                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  [ 4.0 ]  estrellas                                     │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Rating para alertas:                                           │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  [ 3.5 ]  estrellas                                     │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Rating para suspensión automática:                             │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  [ 3.0 ]  estrellas                                     │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Máximo cancelaciones permitidas:                               │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  [  1  ]  cancelaciones                                 │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  [ Guardar cambios ]                                            │
│                                                                 │
│  ℹ️ Los cambios aplican a nuevos operadores inmediatamente.     │
│     Operadores actuales mantienen su configuración.             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Escalabilidad

| Etapa | Servicios | Justificación |
|-------|-----------|---------------|
| MVP | 5 | Validación rápida de calidad |
| Crecimiento | 20 | Más tiempo de evaluación |
| Madurez | 50 | Prestigio de la certificación |
| Nacional | 100 | Elite de operadores |

---

## API para Cambiar Config

```typescript
// server/api/admin/config/periodo-prueba.put.ts
export default defineEventHandler(async (event) => {
  const body = await readBody(event);
  
  // Validar rangos
  if (body.servicios_requeridos < 5 || body.servicios_requeridos > 100) {
    throw createError({ statusCode: 400, message: 'Servicios debe estar entre 5 y 100' });
  }
  
  // Actualizar config
  await supabase
    .from('config_global')
    .update({ value: body })
    .eq('key', 'periodo_prueba');
  
  // Log de auditoría
  await supabase.from('config_audit_log').insert({
    key: 'periodo_prueba',
    old_value: await getRemoteConfig('periodo_prueba'),
    new_value: body,
    changed_by: event.context.user?.id,
    changed_at: new Date()
  });
  
  return { success: true };
});
```

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/1.2.2.1.7 periodo_prueba]]  |
| -------------------- | ----------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/1.2.2.1.7.2 consolidacion]] |

---
