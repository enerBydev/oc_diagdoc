---
id: 3.3
title: Reglas de Negocio
parent: '3.0'
breadcrumb: 0 → 3.0 → 3.3
type: modulo_padre
children_count: 7
descendants_count: 10
status: activo
last_updated: 2026-01-29 15:31
file_create: 2025-12-12 11:33
domain:
- negocio
- reglas
- validaciones
summary: 'Reglas operativas del sistema: horarios, radio de servicio, cancelaciones,

  políticas de cobro, restricciones.

  '
content_hash: c646416b7616ab6b
---

# 3.3 Reglas de Negocio

> Horarios, radio, cancelaciones, etc.

---

## Flujo General de Validación de Cita

```mermaid
flowchart TB
    subgraph Fase1["Fase 1: Validación de Datos"]
        V1[Frontend: Zod Schemas<br>3.3.1] --> V2[Backend: SQL Checks<br>3.3.2]
    end
    
    subgraph Fase2["Fase 2: Validación de Políticas"]
        P1{Dentro de horario?<br>3.3.5} -->|Sí| P2{Dentro de radio?<br>3.3.6}
        P1 -->|No| X1[❌ Rechazar - Fuera horario]
        P2 -->|Sí| P3{Feature habilitado?<br>3.3.7}
        P2 -->|No| X2[❌ Rechazar - Fuera radio]
        P3 -->|Sí| OK[✅ Cita Válida]
        P3 -->|No| X3[❌ Rechazar - Feature desactivado]
    end
    
    subgraph Fase3["Fase 3: Gestión de Cambios"]
        C1{Cancelación?<br>3.3.3} --> C2[Aplicar penalización]
        C3{Reagendamiento?<br>3.3.4} --> C4[Validar límites]
    end
    
    Fase1 --> Fase2
    Fase2 --> OK
    OK -.-> Fase3
```

---

## Horarios de Servicio

| Parámetro           | Valor                           |
| ------------------- | ------------------------------- |
| **Días laborables** | Lunes - Sábado                  |
| **Horario**         | 7:00 AM - 9:00 PM               |
| **Festivos**        | Configurables por Admin         |
| **Domingos**        | Solo servicios B2B con contrato |

---

## Radio de Servicio

| Zona                 | Radio              | Notas          |
| -------------------- | ------------------ | -------------- |
| **Nuevo Laredo**     | 20 km desde centro | Área principal |
| **Expansión futura** | Configurable       | Por ciudad     |

---

## Políticas de Cancelación

| Tiempo antes del servicio | Penalización |
|---------------------------|--------------|
| > 24 horas | Sin cargo |
| 12-24 horas | 25% del servicio |
| < 12 horas | 50% del servicio |
| No-show | 100% del servicio |

---

## Restricciones Operativas

| Regla                     | Descripción                   |
| ------------------------- | ----------------------------- |
| **Servicios simultáneos** | Máx 1 por operador            |
| **Capacidad diaria**      | Máx 20 servicios por operador |
| **Descanso mínimo**       | 30 min entre servicios        |
| **Re-agendamiento**       | Máx 2 veces por cliente       |

---

## Estructura de Hijos (Deep Dive)

| ID                                           | Nombre                   | Descripción             | Nietos | Estado |
| -------------------------------------------- | ------------------------ | ----------------------- | ------ | ------ |
| [[Proyecto OnlyCarNLD/Datos/3.3.1 Validaciones_Frontend\|3.3.1]]       | Validaciones Frontend    | Zod, masks, formularios | 0 | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.3.2 Validaciones_Backend\|3.3.2]]        | Validaciones Backend     | Checks SQL, triggers    | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.3.3 Politicas_Cancelacion\|3.3.3]]       | Políticas Cancelación    | Tarifas dinámicas       | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.3.4 Politicas_Reagendamiento\|3.3.4]]    | Políticas Reagendamiento | Límites, excepciones    | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.3.5 Horarios_Disponibilidad\|3.3.5]]     | Horarios Disponibilidad  | Franjas, festivos       | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.3.6 Radio_Servicio\|3.3.6]]              | Radio Servicio           | Geofencing, ciudades    | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.3.7 Feature_Flags\|3.3.7]]               | Feature Flags            | Activación dinámica     | 0      | ✅      |

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/3.0. datos_y_logica]]          |
| -------------------- | -------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/3.2. matriz_permisos]]         |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.4. Administracion_DB]]       |

---
