---
id: '7.5'
title: TDD y Testing Strategy
parent: '7.0'
breadcrumb: 0 ‚Üí 7.0 ‚Üí 7.5
type: modulo_padre
children_count: 3
descendants_count: 3
domain:
- tdd
- testing
- unit-tests
- e2e
actors:
- desarrollador
- qa
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-21 12:36
summary: 'Test-Driven Development y estrategia de pruebas multinivel. Unit, Integration,
  E2E tests.

  '
content_hash: 8506357639b6bbb0
---

# 7.5 TDD y Testing Strategy

> Test-Driven Development: escribir tests antes del c√≥digo.

> [!NOTE]
> Para **configuraci√≥n t√©cnica** (Vitest, Playwright), ver [[Proyecto OnlyCarNLD/Datos/2.18. Testing_Infrastructure]].

---

## Ciclo TDD (Red-Green-Refactor)

```mermaid
graph LR
    RED["üî¥ RED<br>Escribir test que falla"]
    GREEN["üü¢ GREEN<br>C√≥digo m√≠nimo para pasar"]
    REFACTOR["üîµ REFACTOR<br>Mejorar c√≥digo"]
    
    RED --> GREEN --> REFACTOR --> RED
```

---

## Pir√°mide de Tests

```
        /\
       /  \  E2E (Pocos, lentos, costosos)
      /----\
     /      \ Integration (Moderados)
    /--------\
   /          \ Unit (Muchos, r√°pidos, baratos)
  /____________\
```

| Nivel | Cantidad | Velocidad | Costo |
|-------|----------|-----------|-------|
| **Unit** | Muchos | R√°pido | Bajo |
| **Integration** | Moderados | Medio | Medio |
| **E2E** | Pocos | Lento | Alto |

---

## Estructura de Tests

```
tests/
‚îú‚îÄ‚îÄ unit/                      # Vitest
‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Cita.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ application/
‚îÇ       ‚îî‚îÄ‚îÄ use-cases/
‚îÇ           ‚îî‚îÄ‚îÄ AgendarCitaUseCase.spec.ts
‚îÇ
‚îú‚îÄ‚îÄ integration/               # Vitest + Nitro
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ citas.api.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ database/
‚îÇ       ‚îî‚îÄ‚îÄ citas.db.spec.ts
‚îÇ
‚îî‚îÄ‚îÄ e2e/                       # Playwright
    ‚îú‚îÄ‚îÄ flows/
    ‚îÇ   ‚îî‚îÄ‚îÄ agendar-cita.spec.ts
    ‚îî‚îÄ‚îÄ visual/
        ‚îî‚îÄ‚îÄ screenshots/
```

---

## Ejemplo TDD

```typescript
// üî¥ RED: Test escrito primero
describe('AgendarCitaUseCase', () => {
  it('deber√≠a crear una cita cuando hay disponibilidad', async () => {
    // Arrange
    const input = {
      clienteId: 'cliente-123',
      servicioId: 'lavado-express',
      ubicacion: { lat: 27.4863, lng: -99.5075 },
      fechaHora: new Date('2026-01-21T10:00:00')
    };
    
    // Act
    const result = await useCase.execute(input);
    
    // Assert
    expect(result.success).toBe(true);
    expect(result.cita.estado).toBe('pendiente');
  });
});
```

---

## Estructura de Hijos

| ID | Nombre | Descripci√≥n | Estado |
|----|--------|-------------|--------|
| [[Proyecto OnlyCarNLD/Datos/7.5.1 Unit_Tests\|7.5.1]] | Unit Tests | Tests de funciones individuales | ‚úÖ |
| [[Proyecto OnlyCarNLD/Datos/7.5.2 Integration_Tests\|7.5.2]] | Integration Tests | Tests de componentes + API | ‚úÖ |
| [[Proyecto OnlyCarNLD/Datos/7.5.3 E2E_Tests\|7.5.3]] | E2E Tests | Tests de flujos completos | ‚úÖ |

---

## Navegaci√≥n

| ‚¨ÜÔ∏è Padre | [[Proyecto OnlyCarNLD/Datos/7.0. arquitectura]] |
|----------|----------------------|
| ‚¨ÖÔ∏è Anterior | [[Proyecto OnlyCarNLD/Datos/7.4 Patterns_Repository_Strategy]] |
| ‚û°Ô∏è Siguiente | [[Proyecto OnlyCarNLD/Datos/7.6 Git_Flow_DevOps]] |

---
