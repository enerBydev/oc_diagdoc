---
id: 2.8.2
title: Optimización de Performance
parent: '2.8'
breadcrumb: 0 → 2.0 → 2.8 → 2.8.2
type: especificacion
domain:
- performance
- caching
- cloudflare
- core-web-vitals
status: activo
last_updated: 2026-01-29 15:31
file_create: 2026-01-04 20:41
summary: 'Estrategias de caché SWR (Stale-While-Revalidate).

  Optimización de imágenes y fuentes Cloudflare.'
content_hash: 48cbfcf3c87b4395
---

# 2.8.2 Optimización de Performance

> Estrategias para mantener Core Web Vitals en verde (LCP < 2.5s).

---

## Estrategia de Caching (SWR)

Utilizamos `swr: true` o `maxAge` en `routeRules` de Nuxt para cachear respuestas en el Edge de Cloudflare.

| Ruta | Estrategia | TTL | Razón |
|------|------------|-----|-------|
| `/api/catalog` | SWR | 1h | Cambia poco, alta lectura |
| `/api/prices` | SWR | 15m | Precios dinámicos pero estables |
| `/api/user/**` | No Cache | 0 | Datos privados usuario |

```ts
// nuxt.config.ts
routeRules: {
  '/api/catalog': { swr: 3600 },
}
```

---

## Optimización de Assets

### Imágenes
- Usar formato **WebP** o **AVIF**.
- Servir desde Cloudflare Images o R2 con caché agresivo.
- Usar componente `<NuxtImg>` para redimensionado automático.

### Fuentes
- **Google Sans Flex:** Servida vía CDN Google o como variable font subsetted (< 40 KB).
- **Cloudflare Fonts:** Activar optimización automática para cacheo global.

### Scripts
- Cargar scripts de terceros (Tawk.to) con `strategy="lazyOnload"` o `partytown`.

---

## Bundle Size

- Usar **lazy loading** para componentes de administración pesados (`await import(...)` o `LazyBookingModal`).
- Evitar librerías pesadas (ej. Moment.js -> dayjs).

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.8. Seguridad_Infraestructura]] |
| -------------------- | ---------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.8.1 Politicas_Seguridad]]      |

---
