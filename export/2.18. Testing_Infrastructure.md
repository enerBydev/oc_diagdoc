---
id: '2.18'
title: Infraestructura de Testing
parent: '2.0'
breadcrumb: 0 → 2.0 → 2.18
type: modulo_padre
status: activo
children_count: 6
descendants_count: 6
domain:
- testing
- qa
- ci-cd
- vitest
- playwright
file_create: 2026-01-14 12:50
last_updated: 2026-01-29 15:31
summary: Stack tecnológico de pruebas (Vitest + Playwright), estrategia de testing
  y tipos de pruebas por módulo.
content_hash: 5b7c19615739d284
---

# 2.18 Infraestructura de Testing

> Stack tecnológico y configuración de herramientas de calidad.

> [!NOTE]
> Para la **filosofía TDD** y pirámide de tests, ver [[Proyecto OnlyCarNLD/Datos/7.5 TDD_Testing_Strategy]].

---

## Stack Tecnológico

| Nivel | Herramienta | Justificación |
|-------|-------------|---------------|
| **Unitario / Componentes** | **Vitest** | Nativo de Vite, Rápido, Compatible con Jest API. |
| **End-to-End (E2E)** | **Playwright** | Multi-navegador, Trazabilidad, Soporte Mobile Web. |
| **Runner CI** | **GitHub Actions** | Integración nativa con repositorio. |
| **Visual Regression** | **Percy / Chromatic** | Detección de cambios visuales no deseados. |

---

## Estructura de Hijos

| ID | Nombre | Descripción | Estado |
|----|--------|-------------|--------|
| [[Proyecto OnlyCarNLD/Datos/2.18.1 Estrategia_Testing\|2.18.1]] | Estrategia de Testing | Niveles, cobertura, ambientes | ✅ |
| [[Proyecto OnlyCarNLD/Datos/2.18.2 Tipos_Pruebas\|2.18.2]] | Tipos de Pruebas | Casos por módulo | ✅ |
| [[Proyecto OnlyCarNLD/Datos/2.18.3 Test_Fixtures_Mocks\|2.18.3]] | Test Fixtures & Mocks | Factories, Mocks, MSW | ✅ |
| [[Proyecto OnlyCarNLD/Datos/2.18.4 Coverage_Reporting\|2.18.4]] | Coverage Reporting | Vitest Istanbul/v8 config | ✅ |
| [[Proyecto OnlyCarNLD/Datos/2.18.5 Visual_Regression\|2.18.5]] | Visual Regression | Percy/Chromatic snapshots | ✅ |
| [[Proyecto OnlyCarNLD/Datos/2.18.6 Mobile_Testing\|2.18.6]] | Mobile Testing | Playwright Mobile, Maestro | ✅ |

---

## Configuración Base

### Vitest (`vitest.config.ts`)

```typescript
import { defineConfig } from 'vitest/config'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  test: {
    environment: 'happy-dom',
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      lines: 80 // Budget de cobertura
    },
    include: ['tests/unit/**/*.{test,spec}.ts']
  },
})
```

### Playwright (`playwright.config.ts`)

```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
  },
  projects: [
    { name: 'chromium', use: { ...devices['Desktop Chrome'] } },
    { name: 'Mobile Chrome', use: { ...devices['Pixel 5'] } },
    { name: 'Mobile Safari', use: { ...devices['iPhone 12'] } },
  ],
});
```

---

## Integración CI/CD

Ver detalle en [[Proyecto OnlyCarNLD/Datos/2.7. Estandares_Desarrollo]]. El pipeline debe ejecutar:
1.  Linting
2.  Unit Tests (Vitest)
3.  Build
4.  E2E Smoke Tests (Playwright)

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.0. tecnologia]] |
| -------------------- | ------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.17. Performance_Strategy]] |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/2.19. Disaster_Recovery_Tech]] |

---

