---
id: 2.12.2
title: Mocking Servicios
parent: '2.12'
breadcrumb: 0 → 2.0 → 2.12 → 2.12.2
type: especificacion
domain:
- mocking
- msw
- testing
- offline-dev
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-05 01:00
summary: 'Estrategia para desarrollar sin depender de APIs externas (Stripe, Google
  Maps).

  Uso de Mock Service Worker (MSW).'
content_hash: 609def15c98875e1
---

# 2.12.2 Mocking Servicios

> Desarrollar la integración de pagos en un avión sin internet.

---

## ¿Por qué Mockar?

1.  **Costo:** Evitar llamadas facturables a APIs de mapas.
2.  **Velocidad:** Las respuestas mock son inmediatas (0ms latencia).
3.  **Casos Borde:** Es difícil forzar a Stripe a devolver un "Error 503" real, pero fácil en un mock.

---

## Mock Service Worker (MSW)

Interceptamos las peticiones HTTP a nivel de red (Service Worker en browser, Node en server).

### Ejemplo: Mock Stripe Payment

```ts
// mocks/handlers.ts
import { http, HttpResponse } from 'msw'

export const handlers = [
  http.post('https://api.stripe.com/v1/payment_intents', () => {
    return HttpResponse.json({
      id: 'pi_mock_123',
      amount: 5000,
      status: 'succeeded' // O 'requires_action' para probar flujos difíciles
    })
  })
]
```

---

## Switch de Modo

Variables en `.env` controlan el comportamiento:

```bash
# .env
MOCK_EXTERNAL_APIS=true
```

Si es true, Nuxt carga el plugin de MSW al iniciar.

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.12. Entorno_Desarrollo]]    |
| -------------------- | ------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.12.1 Setup_Automatizado]]   |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/2.12.3 Cheatsheets_CLI]]      |

---
