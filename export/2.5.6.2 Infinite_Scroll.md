---
id: 2.5.6.2
title: Infinite Scroll
parent: 2.5.6
breadcrumb: 0 → 2.0 → 2.5 → 2.5.6 → 2.5.6.2
type: guia
children_count: 0
descendants_count: 0
status: activo
domain:
- frontend
- pagination
- scroll
- performance
actors:
- desarrollador
summary: 'Patrón de lista infinita: Paginación basada en cursor para feeds y listados
  largos.'
last_updated: 2026-01-29 15:31
file_create: 2026-01-23 02:45
content_hash: 7713366463cefd7f
---

# 2.5.6.2 Infinite Scroll

> Cargar datos bajo demanda mientras el usuario explora, sin botones de "Página siguiente".

---

## Estrategia de Paginación

Usamos **Cursor-based Pagination** (no Offset-based) para mayor performance y consistencia en datos tiempo real.

- **Offset:** `LIMIT 10 OFFSET 50` (Lento en tablas grandes, duplicados si entran items nuevos).
- **Cursor:** `WHERE id > last_seen_id LIMIT 10` (Rápido, usa índices).

---

## Implementación (VueUse)

Utilizamos `useInfiniteScroll` de VueUse para detectar el final del scroll.

```typescript
// composables/useFeed.ts
export function useFeed() {
  const items = ref([]);
  const lastCursor = ref(null);
  const isLoading = ref(false);
  const hasMore = ref(true);

  async function loadMore() {
    if (isLoading.value || !hasMore.value) return;
    
    isLoading.value = true;
    
    let query = supabase
      .from('posts')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(10);
      
    if (lastCursor.value) {
      query = query.lt('created_at', lastCursor.value);
    }
    
    const { data } = await query;
    
    if (data.length < 10) hasMore.value = false;
    if (data.length > 0) {
      items.value.push(...data);
      lastCursor.value = data[data.length - 1].created_at;
    }
    
    isLoading.value = false;
  }
  
  return { items, loadMore, isLoading, hasMore };
}
```

---

## Componente UI

```vue
<template>
  <div class="feed-container">
    <PostCard v-for="post in items" :key="post.id" :post="post" />
    
    <div ref="el" class="loader-trigger">
      <Spinner v-if="isLoading" />
      <span v-if="!hasMore">Fin del contenido</span>
    </div>
  </div>
</template>

<script setup>
import { useInfiniteScroll } from '@vueuse/core';

const el = ref(null);
const { items, loadMore, isLoading, hasMore } = useFeed();

useInfiniteScroll(
  el,
  () => { loadMore() },
  { distance: 10 } // Trigger 10px antes del final
);
</script>
```

---

## Virtual Scroller

Para listas MUY largas (> 1000 items), el DOM se vuelve lento. En ese caso usamos virtualización (solo renderizar lo visible).

Recomendación: Usar **TanStack Virtual** (versión Vue) si el performance decae.

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.5.6 Data_Fetching]]       |
| -------------------- | ----------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.5.6.1 Optimistic_Updates]]|

---
