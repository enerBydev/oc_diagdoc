---
id: '7.2'
title: Clean Architecture + DDD
parent: '7.0'
breadcrumb: 0 ‚Üí 7.0 ‚Üí 7.2
type: modulo_padre
children_count: 4
descendants_count: 4
domain:
- clean-architecture
- ddd
- domain-driven
- bounded-contexts
actors:
- desarrollador
- arquitecto
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-21 12:36
summary: 'Capas de cebolla con flujo de dependencias hacia adentro. Bounded Contexts
  para modelar el dominio OnlyCar.

  '
content_hash: 40deb70f612f1b2c
---

# 7.2 Clean Architecture + Domain-Driven Design

> Capas de cebolla con flujo de dependencias hacia adentro.
> Bounded Contexts para modelar el dominio OnlyCar.

---

## Capas de Clean Architecture

| Capa | Contenido | Dependencias |
|------|-----------|--------------|
| **Entities** (centro) | Cita, Operador, Cliente | Ninguna |
| **Use Cases** | AgendarCita, ProcesarPago | Entities |
| **Interface Adapters** | Controllers, Presenters | Use Cases |
| **External** | Supabase, Stripe, GPS | Interface Adapters |

---

## Regla de Dependencia

> **"Las dependencias SIEMPRE apuntan hacia ADENTRO"**

- ‚ùå Domain NO conoce Infrastructure
- ‚ùå Application NO conoce Presentation
- ‚úÖ Infrastructure conoce Domain (implementa interfaces)
- ‚úÖ Presentation conoce Application (llama use cases)

---

## Bounded Contexts OnlyCar

```mermaid
graph LR
    subgraph AGENDAMIENTO["üìÖ Agendamiento"]
        Cita[Cita]
        Servicio[Servicio]
        Horario[Horario]
    end
    
    subgraph OPERACIONES["üîß Operaciones"]
        Operador[Operador]
        Ruta[Ruta]
        Asignacion[Asignaci√≥n]
    end
    
    subgraph PAGOS["üí≥ Pagos"]
        Pago[Pago]
        Factura[Factura]
        Liquidacion[Liquidaci√≥n]
    end
    
    subgraph CLIENTES["üë§ Clientes"]
        Cliente[Cliente]
        Empresa[Empresa B2B]
        Flotilla[Flotilla]
    end
    
    AGENDAMIENTO --> OPERACIONES
    AGENDAMIENTO --> PAGOS
    CLIENTES --> AGENDAMIENTO
```

---

## Agregados y Entidades

| Agregado Root | Entidades | Value Objects |
|---------------|-----------|---------------|
| **Cita** | CitaDetalle, ServicioAplicado | Ubicacion, Precio, FechaHora |
| **Operador** | Perfil, Vehiculo, Calificacion | Coordenadas, ComisionRate |
| **Cliente** | Perfil, Vehiculos[] | Direccion, MetodoPago |
| **Pago** | Transaccion, Factura | Monto, TipoPago |

---

## Estructura de Hijos

| ID | Nombre | Descripci√≥n | Estado |
|----|--------|-------------|--------|
| [[Proyecto OnlyCarNLD/Datos/7.2.1 Domain_Layer\|7.2.1]] | Capa de Dominio | Entities, Value Objects | ‚úÖ |
| [[Proyecto OnlyCarNLD/Datos/7.2.2 Application_Layer\|7.2.2]] | Capa de Aplicaci√≥n | Use Cases, DTOs | ‚úÖ |
| [[Proyecto OnlyCarNLD/Datos/7.2.3 Infrastructure_Layer\|7.2.3]] | Capa de Infraestructura | Adapters, Config | ‚úÖ |
| [[Proyecto OnlyCarNLD/Datos/7.2.4 Bounded_Contexts\|7.2.4]] | Bounded Contexts | Agendamiento, Pagos, etc. | ‚úÖ |

---

## Navegaci√≥n

| ‚¨ÜÔ∏è Padre | [[Proyecto OnlyCarNLD/Datos/7.0. arquitectura]] |
|----------|----------------------|
| ‚¨ÖÔ∏è Anterior | [[Proyecto OnlyCarNLD/Datos/7.1 Hexagonal_Architecture]] |
| ‚û°Ô∏è Siguiente | [[Proyecto OnlyCarNLD/Datos/7.3 Atomic_Design_System]] |

---
