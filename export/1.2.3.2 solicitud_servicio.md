---
id: 1.2.3.2
title: Solicitud de Servicio
parent: 1.2.3
breadcrumb: 0 ‚Üí 1.0 ‚Üí 1.2 ‚Üí 1.2.3 ‚Üí 1.2.3.2
type: flujo
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-09 12:30
domain:
- cliente
- servicio
- cita
- agendamiento
- matching
summary: 'El proceso core de generaci√≥n de valor: agendar una cita.

  Cubre selecci√≥n de servicios, l√≥gica de disponibilidad y asignaci√≥n (matching),

  manejo de zonas sin cobertura y escenarios de "sin disponibilidad".

  '
content_hash: 45edf99b1728fe7d
---

# 1.2.3.2 Solicitud de Servicio

> **Prop√≥sito:** Facilitar la compra de servicios en menos de 4 pasos, manejando la complejidad log√≠stica (disponibilidad, ubicaci√≥n, precios din√°micos) de forma transparente para el usuario.

---

## 1. El Flujo de Agendamiento ("The Happy Path")

```mermaid
sequenceDiagram
    participant User as Cliente
    participant App as App M√≥vil
    participant Backend as API Server
    participant Geo as Servicio Geo
    
    User->>App: 1. Selecciona Servicio (Lavado SUV)
    App->>Backend: GetPrecio(Servicio, SUV)
    Backend-->>App: Precio $250
    
    User->>App: 2. Confirma Veh√≠culo y Ubicaci√≥n
    App->>Geo: ValidarCobertura(Lat, Lon)
    Geo-->>App: OK (Zona Centro)
    
    User->>App: 3. Selecciona Fecha/Hora
    App->>Backend: GetSlotsDisponibles(Zona, Fecha)
    Backend-->>App: [10:00, 11:30, 14:00]
    
    User->>App: 4. Pagar y Confirmar
    App->>Backend: CrearOrden(Datos)
    Backend->>Backend: AsignarOperador(Matching)
    Backend-->>App: Cita Confirmada #1234
    App-->>User: Pantalla √âxito üéâ
```

---

## 2. L√≥gica de Disponibilidad (Slots)

La disponibilidad no es est√°tica; depende de la intersecci√≥n de 3 factores:
1.  **Horario Operativo:** Definido en Configuraci√≥n (ej. 8am - 6pm).
2.  **Operadores Activos en Zona:** Cantidad de operadores con "Check-in" en el pol√≠gono del cliente.
3.  **Duraci√≥n Estimada:** Un servicio de 2 horas bloquea m√°s slots que uno de 30 min.

**Algoritmo Simplificado:**
`SlotsDisponibles = (OperadoresTotal * HorasOperativas) - (CitasYaAgendadas + TiemposTraslado)`

---

## 3. Escenarios Alternativos y Edge Cases

### 3.1 "Sin Operadores Disponibles" (Saturation)
Cuando la demanda supera la oferta en un horario/zona.
**UX:**
- No bloquear todo el d√≠a.
- Mostrar mensaje: *"Lo sentimos, estamos llenos a las 10:00. ¬øTe sirve a las 11:30?"*
- Opci√≥n **"Lista de Espera"**: Si se libera un slot (cancelaci√≥n), notificar al usuario.

### 3.2 "Fuera de Cobertura" (Out of Zone)
Si el pin del mapa cae fuera de las zonas activas.
**UX:**
- Mostrar visualmente el l√≠mite de la zona cercana.
- Mensaje: *"A√∫n no llegamos a esta calle, pero estamos cerca. ¬øPuedes acercar tu veh√≠culo a esta zona azul?"*
- Registro de lead: "Av√≠same cuando lleguen a mi zona" (guarda Lat/Lon para expansi√≥n futura).

### 3.3 "Clima Adverso" (Rain Check)
Si est√° lloviendo o hay pron√≥stico >80% lluvia.
**UX:**
- Banner de advertencia: *"Pron√≥stico de lluvia. ¬øDeseas continuar bajo tu riesgo o reagendar?"*
- Pol√≠tica de garant√≠a de lluvia (si aplica): *"Si llueve en 24h, te repetimos el exterior al 50%."*

---

## 4. Confirmaci√≥n y Pre-Autorizaci√≥n

Para reducir "No-Shows" (clientes que no aparecen):
1.  **Pago con Tarjeta:** Se hace un "Hold" (pre-autorizaci√≥n) del monto. Solo se cobra al finalizar el servicio.
2.  **Pago Efectivo:** Requiere verificaci√≥n telef√≥nica para usuarios nuevos/baja reputaci√≥n.

## Navegaci√≥n

| Elemento | Enlace |
|----------|--------|
| ‚¨ÜÔ∏è Padre | [[Proyecto OnlyCarNLD/Datos/1.2.3 cliente_b2c_perfil]] |
| ‚¨ÖÔ∏è Anterior | [[Proyecto OnlyCarNLD/Datos/1.2.3.1 registro_b2c]] |
| ‚û°Ô∏è Siguiente | [[Proyecto OnlyCarNLD/Datos/1.2.3.3 historial_servicios]] |
| üîó Matching | [[Proyecto OnlyCarNLD/Datos/1.3.6.1 asignacion_citas]] |
