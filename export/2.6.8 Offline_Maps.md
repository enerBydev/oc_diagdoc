---
id: 2.6.8
title: Offline Maps
parent: '2.6'
breadcrumb: 0 → 2.0 → 2.6 → 2.6.8
type: configuracion
children_count: 0
descendants_count: 0
status: activo
domain:
- maps
- offline
- capacitor
- mapbox
actors:
- mobile-dev
summary: 'Estrategia de Mapas Offline: Caché de tiles y navegación básica sin conexión.'
last_updated: 2026-01-29 15:32
file_create: 2026-01-23 03:20
content_hash: 666f969ddc5d1038
---

# 2.6.8 Offline Maps

> El operador puede perder señal en ruta, pero no debe perder el mapa.

---

## Tecnología: Vector Tiles

Usamos **Mapbox GL JS** (o alternativo vectorial) porque permite cachear áreas grandes con poco peso. Google Maps SDK tiene límites estrictos de offline.

---

## Estrategia de Caché

1. **Área Activa:** Al asignar orden, descargar radio de 5km alrededor del destino.
2. **TTL:** Mantener tiles por 30 días.
3. **Fallback:** Si no hay tile detallado, mostrar nivel de zoom superior (menos detalle pero contexto).

---

## Implementación Mobile

```typescript
import { OfflineManager } from '@ionic-native/google-maps';

async function cacheArea(lat, lng) {
  // Descargar región para uso offline
  await OfflineManager.downloadRegion({
    name: 'ruta_orden_123',
    lat: lat,
    lng: lng,
    zoomMin: 12,
    zoomMax: 18
  });
}
```

---

## Navegación GPS Sin Red

La app pasa las coordenadas a la app nativa de mapas (Google Maps / Waze) que suele tener su propia lógica offline robusta.

```typescript
function openNavigation(lat, lng) {
  // Intentar abrir app externa
  window.open(`geo:${lat},${lng}?q=${lat},${lng}`, '_system');
}
```

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.6. Arquitectura_Mobile]]   |
| -------------------- | ------------------------------ |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.6.7 App_Store_Guidelines]] |
| ➡️ Hermano siguiente | *(Último hijo de 2.6)*         |

---
