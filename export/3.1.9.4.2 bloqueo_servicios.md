---
id: 3.1.9.4.2
title: Bloqueo de Servicios
parent: 3.1.9.4
breadcrumb: 0 â†’ 3.0 â†’ 3.1 â†’ 3.1.9 â†’ 3.1.9.4 â†’ 3.1.9.4.2
type: hoja
status: activo
last_updated: 2026-01-29 15:31
file_create: 2025-12-27 14:15
domain:
- bloqueo
- servicios
- restriccion
actors:
- operador
- admin
summary: 'RestricciÃ³n de operaciones por deuda.

  Bloqueo progresivo segÃºn tiempo sin liquidar.'
content_hash: e68cb0d55f02916d
---

# 3.1.9.4.2 Bloqueo de Servicios

RestricciÃ³n de operaciones por deuda.

---

## PolÃ­tica de Bloqueo

| Tiempo sin liquidar | AcciÃ³n |
|---------------------|--------|
| Corte viernes | Retener pago semanal |
| +24 horas | Alerta urgente |
| +48 horas | Bloqueo asignaciÃ³n servicios |
| +72 horas | SuspensiÃ³n temporal cuenta |

---

## LÃ³gica de Bloqueo

```typescript
const verificarBloqueoOperador = async (operadorId: string): Promise<{
  bloqueado: boolean;
  motivo?: string;
  monto?: number;
}> => {
  const { data: deuda } = await supabase
    .from('deudas_caja')
    .select('*')
    .eq('operador_id', operadorId)
    .eq('estado', 'activa')
    .single();
  
  if (!deuda) {
    return { bloqueado: false };
  }
  
  const horasSinLiquidar = differenceInHours(new Date(), deuda.created_at);
  
  if (horasSinLiquidar >= 48) {
    return {
      bloqueado: true,
      motivo: 'caja_pendiente_48h',
      monto: deuda.monto
    };
  }
  
  return { bloqueado: false };
};

// Middleware antes de asignar servicio
const middleware = async (operadorId: string) => {
  const status = await verificarBloqueoOperador(operadorId);
  if (status.bloqueado) {
    throw new Error(`Operador bloqueado: ${status.motivo}`);
  }
};
```

---

## UI: Cuenta Bloqueada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš« CUENTA TEMPORALMENTE BLOQUEADA                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Tu cuenta estÃ¡ bloqueada debido a caja pendiente.              â”‚
â”‚                                                                 â”‚
â”‚  No puedes:                                                     â”‚
â”‚  âŒ Aceptar nuevos servicios                                    â”‚
â”‚  âŒ Ver la lista de servicios disponibles                       â”‚
â”‚  âŒ Recibir tu pago semanal                                     â”‚
â”‚                                                                 â”‚
â”‚  PARA DESBLOQUEAR:                                              â”‚
â”‚  Liquida tu caja pendiente de $790                              â”‚
â”‚                                                                 â”‚
â”‚  [ Liquidar ahora ]                                             â”‚
â”‚                                                                 â”‚
â”‚  Â¿Necesitas ayuda? Contacta a soporte                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## NavegaciÃ³n

| â¬†ï¸ Padre             | [[Proyecto OnlyCarNLD/Datos/3.1.9.4 penalizaciones_caja]]     |
| -------------------- | ----------------------------------- |
| â¬…ï¸ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/3.1.9.4.1 deuda_pendiente]]       |
| â¡ï¸ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.1.9.4.3 proceso_recuperacion]]  |

---
