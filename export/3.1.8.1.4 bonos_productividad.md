---
id: 3.1.8.1.4
title: Bonos de Productividad
parent: 3.1.8.1
breadcrumb: 0 โ 3.0 โ 3.1 โ 3.1.8 โ 3.1.8.1 โ 3.1.8.1.4
type: hoja
status: activo
last_updated: 2026-01-29 15:31
file_create: 2025-12-27 14:08
domain:
- bonos
- productividad
- puntualidad
actors:
- operador
summary: 'Bonificaciones por volumen y puntualidad.

  Puntualidad 100% (+0.5%), +20 servicios/semana (+0.5%).'
content_hash: 976dd8d8f8abc23f
---

# 3.1.8.1.4 Bonos de Productividad

Bonificaciones por volumen y puntualidad.

---

## Bonos Disponibles

| Bono | Requisito | Valor |
|------|-----------|-------|
| โฐ Puntualidad | 100% puntual en el mes | +0.5% |
| ๐ Productividad | +20 servicios/semana | +0.5% |

---

## Puntualidad

```typescript
const calcularBonoPuntualidad = async (
  operadorId: string,
  mes: Date
): Promise<number> => {
  const { data: servicios } = await supabase
    .from('citas')
    .select('llegada_estimada, llegada_real')
    .eq('operador_id', operadorId)
    .eq('estado', 'completado')
    .gte('completado_at', startOfMonth(mes))
    .lte('completado_at', endOfMonth(mes));
  
  if (servicios.length === 0) return 0;
  
  const todosPuntuales = servicios.every(s => {
    const diferencia = differenceInMinutes(
      new Date(s.llegada_real),
      new Date(s.llegada_estimada)
    );
    return diferencia <= 10; // 10 min de tolerancia
  });
  
  return todosPuntuales ? 0.5 : 0;
};
```

---

## Productividad Semanal

```typescript
const calcularBonoProductividad = async (
  operadorId: string,
  semana: Date
): Promise<number> => {
  const inicioSemana = startOfWeek(semana, { weekStartsOn: 1 });
  const finSemana = endOfWeek(semana, { weekStartsOn: 1 });
  
  const { count } = await supabase
    .from('citas')
    .select('*', { count: 'exact' })
    .eq('operador_id', operadorId)
    .eq('estado', 'completado')
    .gte('completado_at', inicioSemana)
    .lte('completado_at', finSemana);
  
  return count >= 20 ? 0.5 : 0;
};
```

---

## UI: Estado de Bonos

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โฐ PUNTUALIDAD                                       +0.5%     โ
โ  Llegadas a tiempo: 18/18 (100%)                                โ
โ  Estado: โ ACTIVO                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ PRODUCTIVIDAD SEMANAL                             +0.5%     โ
โ  Servicios esta semana: 23                                      โ
โ  Requisito: โฅ20                                                 โ
โ  Estado: โ ACTIVO                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Navegaciรณn

| โฌ๏ธ Padre             | [[Proyecto OnlyCarNLD/Datos/3.1.8.1 modelo_comision]]        |
| -------------------- | ---------------------------------- |
| โฌ๏ธ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/3.1.8.1.3 bonos_calidad]]        |
| โก๏ธ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.1.8.1.5 ajuste_penalizacion]]  |

---
