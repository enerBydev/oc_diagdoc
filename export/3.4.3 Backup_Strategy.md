---
id: 3.4.3
title: Estrategia de Backups
parent: '3.4'
breadcrumb: 0 → 3.0 → 3.4 → 3.4.3
type: proceso
status: activo
domain:
- seguridad
- backups
- pitr
- supabase
summary: 'Política de respaldos: Point-in-Time Recovery (PITR) para recuperación granular
  y Backups Diarios lógicos.'
last_updated: 2026-01-29 15:32
content_hash: 6e1cbeea58764d30
---

# 3.4.3 Estrategia de Backups

> "Los datos no existen a menos que tengan al menos dos copias en diferentes lugares."

---

## Métricas Objetivo (SLA)

| Métrica | Valor | Descripción |
|---------|-------|-------------|
| **RTO** (Recovery Time) | 4 horas | Tiempo máximo para restaurar servicio |
| **RPO** (Recovery Point) | 1 hora | Pérdida máxima de datos aceptable |

---

## 1. Point-in-Time Recovery (PITR)

Habilitado a nivel proyecto Supabase Pro.
- **Ventana de Retención**: 7 días.
- **Granularidad**: Al segundo.
- **Uso**: "Borré una tabla por error hace 10 minutos". Podemos restaurar el estado exacto de la DB hace 11 minutos.

## 2. Backups Diarios Automáticos (Snapshot)

Supabase realiza un backup completo de la base de datos a medianoche.
- **Almacenamiento**: Gestionado por Supabase (AWS S3).
- **Retención**: 30 días.

## 3. Backups Lógicos Externos (Cold Storage)

Una vez a la semana, un script de GitHub Actions realiza un `pg_dump` y comprime los datos críticos (excluyendo logs) para enviarlos a un Bucket R2 de Cloudflare encriptado.
*Esto nos protege en el caso catastrófico de que Supabase como plataforma deje de funcionar.*

```bash
pg_dump $DB_URL | gzip > backup_$(date +%F).sql.gz
rclone copy backup.sql.gz r2:onlycar-backups/
```

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/3.4. Administracion_DB]] |
| -------------------- | -------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/3.4.2 Seeds_Por_Ambiente]] |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.4.4 Disaster_Recovery]] |

---
