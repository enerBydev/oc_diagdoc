---
id: 5.8.4
title: NavegaciÃ³n Externa
parent: '5.8'
breadcrumb: 0 â†’ 5.0 â†’ 5.8 â†’ 5.8.4
type: feature
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-01 18:10
domain:
- waze
- gmaps
- navegacion
summary: Links a apps de navegaciÃ³n externa (Waze/GMaps).
content_hash: c58fe6a4b761628c
---

# 5.8.4 NavegaciÃ³n Externa

IntegraciÃ³n con Waze y Google Maps para navegaciÃ³n turn-by-turn.

---

## Estrategia

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NUESTRA APP                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  â€¢ Muestra ubicaciÃ³n en tiempo real (Leaflet)                   â”‚
â”‚  â€¢ NO tiene navegaciÃ³n turn-by-turn                             â”‚
â”‚  â€¢ Abre app externa para navegaciÃ³n                             â”‚
â”‚                                                                 â”‚
â”‚  WAZE / GOOGLE MAPS                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  â€¢ NavegaciÃ³n turn-by-turn profesional                          â”‚
â”‚  â€¢ ETA preciso con trÃ¡fico                                      â”‚
â”‚  â€¢ Gratis para el usuario                                       â”‚
â”‚                                                                 â”‚
â”‚  = MEJOR EXPERIENCIA SIN COSTO DE DESARROLLO                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## URLs de Deep Link

```typescript
// utils/navegacionExterna.ts

interface NavegacionDestino {
  lat: number;
  lng: number;
  nombre?: string;
}

/**
 * URLs para abrir apps de navegaciÃ³n
 */
export const getNavegacionUrls = (destino: NavegacionDestino) => {
  const { lat, lng, nombre } = destino;
  const label = encodeURIComponent(nombre || 'Destino');
  
  return {
    // Waze - NavegaciÃ³n inmediata
    waze: `https://waze.com/ul?ll=${lat},${lng}&navigate=yes`,
    
    // Google Maps - NavegaciÃ³n modo conducciÃ³n
    googleMaps: `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving`,
    
    // Google Maps - Con nombre del lugar
    googleMapsNamed: `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`,
    
    // Apple Maps (solo iOS)
    appleMaps: `maps://maps.apple.com/?daddr=${lat},${lng}&dirflg=d`,
    
    // Fallback universal (abre en navegador)
    web: `https://www.openstreetmap.org/directions?engine=fossgis_osrm_car&route=;${lat},${lng}`
  };
};
```

---

## Composable

```typescript
// composables/useNavegacion.ts
import { Capacitor } from '@capacitor/core';
import { Browser } from '@capacitor/browser';
import { AppLauncher } from '@capacitor/app-launcher';

export const useNavegacion = () => {
  
  /**
   * Abrir navegaciÃ³n en app externa
   */
  const abrirNavegacion = async (
    destino: { lat: number; lng: number; nombre?: string },
    app: 'waze' | 'googleMaps' | 'auto' = 'auto'
  ) => {
    const urls = getNavegacionUrls(destino);
    
    // Auto-detectar mejor opciÃ³n
    if (app === 'auto') {
      app = await detectarMejorApp();
    }
    
    const url = urls[app];
    
    if (Capacitor.isNativePlatform()) {
      // En app nativa, intentar abrir app directamente
      try {
        await AppLauncher.openUrl({ url });
      } catch {
        // Si falla, abrir en browser
        await Browser.open({ url });
      }
    } else {
      // En web, abrir en nueva pestaÃ±a
      window.open(url, '_blank');
    }
  };
  
  /**
   * Detectar si Waze o GMaps estÃ¡n instalados
   */
  const detectarMejorApp = async (): Promise<'waze' | 'googleMaps'> => {
    if (!Capacitor.isNativePlatform()) {
      return 'googleMaps'; // Web siempre GMaps
    }
    
    // Verificar si Waze estÃ¡ instalado
    try {
      const wazeInstalled = await AppLauncher.canOpenUrl({ 
        url: 'waze://' 
      });
      if (wazeInstalled.value) return 'waze';
    } catch {}
    
    return 'googleMaps';
  };
  
  /**
   * Obtener opciones disponibles para el usuario
   */
  const getOpcionesNavegacion = async () => {
    const opciones: Array<{ id: string; nombre: string; icono: string }> = [];
    
    if (Capacitor.isNativePlatform()) {
      // Verificar apps instaladas
      try {
        const waze = await AppLauncher.canOpenUrl({ url: 'waze://' });
        if (waze.value) {
          opciones.push({ id: 'waze', nombre: 'Waze', icono: 'ğŸš—' });
        }
      } catch {}
      
      try {
        const gmaps = await AppLauncher.canOpenUrl({ url: 'comgooglemaps://' });
        if (gmaps.value) {
          opciones.push({ id: 'googleMaps', nombre: 'Google Maps', icono: 'ğŸ“' });
        }
      } catch {}
    }
    
    // Siempre disponible como fallback
    opciones.push({ id: 'web', nombre: 'Abrir en navegador', icono: 'ğŸŒ' });
    
    return opciones;
  };
  
  return {
    abrirNavegacion,
    detectarMejorApp,
    getOpcionesNavegacion
  };
};
```

---

## Componente de BotÃ³n

```vue
<!-- components/BotonNavegacion.vue -->
<script setup lang="ts">
const props = defineProps<{
  destinoLat: number;
  destinoLng: number;
  destinoNombre?: string;
}>();

const { abrirNavegacion, getOpcionesNavegacion } = useNavegacion();

const opciones = ref<Array<{ id: string; nombre: string; icono: string }>>([]);
const showMenu = ref(false);

onMounted(async () => {
  opciones.value = await getOpcionesNavegacion();
});

const handleClick = async (appId: string) => {
  showMenu.value = false;
  
  await abrirNavegacion(
    { lat: props.destinoLat, lng: props.destinoLng, nombre: props.destinoNombre },
    appId as any
  );
};
</script>

<template>
  <div class="navegacion-container">
    <!-- BotÃ³n principal -->
    <button 
      @click="showMenu = !showMenu"
      class="btn-navegacion"
    >
      ğŸ—ºï¸ Navegar
    </button>
    
    <!-- MenÃº de opciones -->
    <Transition name="fade">
      <div v-if="showMenu" class="menu-opciones">
        <button 
          v-for="opcion in opciones"
          :key="opcion.id"
          @click="handleClick(opcion.id)"
          class="opcion"
        >
          <span>{{ opcion.icono }}</span>
          <span>{{ opcion.nombre }}</span>
        </button>
      </div>
    </Transition>
  </div>
</template>

<style scoped>
.navegacion-container {
  position: relative;
}

.btn-navegacion {
  padding: 12px 20px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
}

.menu-opciones {
  position: absolute;
  bottom: 100%;
  left: 0;
  margin-bottom: 8px;
  background: var(--color-surface);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  overflow: hidden;
}

.opcion {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  width: 100%;
  border: none;
  background: none;
  cursor: pointer;
}

.opcion:hover {
  background: var(--color-hover);
}
</style>
```

---

## Vista del Operador

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš— SERVICIO ACTIVO                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Cliente: Juan GarcÃ­a                                           â”‚
â”‚  DirecciÃ³n: Av. Reforma 1234, Col. Centro                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚              [MAPA CON DESTINO]                         â”‚    â”‚
â”‚  â”‚                     ğŸ“                                  â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  [ ğŸš— Abrir en Waze ]  [ ğŸ“ Abrir en Google Maps ]              â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                 â”‚
â”‚  [ ğŸŸ¢ Iniciar viaje ]                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

â†’ Ver detecciÃ³n llegada: [[Proyecto OnlyCarNLD/Datos/5.8.5 deteccion_llegada]]

---

## NavegaciÃ³n

| â¬†ï¸ Padre             | [[Proyecto OnlyCarNLD/Datos/5.8. geolocalizacion]]            |
| -------------------- | ---------------------- |
| â¬…ï¸ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/5.8.3 mapas_visualizacion]]              |
| â¡ï¸ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/5.8.5 deteccion_llegada]]              |

---
