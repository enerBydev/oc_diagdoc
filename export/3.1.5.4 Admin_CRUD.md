---
id: 3.1.5.4
title: Admin CRUD API
parent: 3.1.5
breadcrumb: 0 → 3.0 → 3.1 → 3.1.5 → 3.1.5.4
type: hoja
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-05 12:30
domain:
- api
- admin
- crud
actors:
- admin
summary: Endpoints administrativos para gestión completa de entidades.
content_hash: a7d8dd4cbeb4a4cf
---

# 3.1.5.4 Admin CRUD API

> Endpoints con rol admin para operaciones CRUD completas.

---

## Endpoints

| Recurso | GET | POST | PUT | DELETE |
|---------|-----|------|-----|--------|
| `/api/admin/config` | ✅ | — | ✅ | — |
| `/api/admin/servicios` | ✅ | ✅ | ✅ | ✅ |
| `/api/admin/paquetes` | ✅ | ✅ | ✅ | ✅ |
| `/api/admin/descuentos` | ✅ | ✅ | ✅ | — |
| `/api/admin/empresas` | ✅ | ✅ | ✅ | — |

---

## Ejemplo: POST /api/admin/servicios

```typescript
import { z } from 'zod';

const servicioSchema = z.object({
  codigo: z.string().min(3).max(100),
  nombre: z.string().min(3).max(200),
  servicio_minutos: z.number().min(10),
  precio_base: z.number().min(50),
});

export default defineEventHandler(async (event) => {
  requireRole(event, ['admin']);
  
  const body = await readBody(event);
  const validated = servicioSchema.parse(body);
  
  const { data, error } = await client
    .from('servicios')
    .insert(validated)
    .select()
    .single();
  
  return { success: true, data };
});
```

---

## Navegación

| ⬆️ Padre | [[Proyecto OnlyCarNLD/Datos/3.1.5 api_logica_negocio]] |
|----------|------------------------------|
| ⬅️ Anterior | [[Proyecto OnlyCarNLD/Datos/3.1.5.3 Empresa_API]] |
| ➡️ Siguiente | [[Proyecto OnlyCarNLD/Datos/3.1.5.5 Middleware_Auth]] |

---
