---
id: 5.0
title: Integraciones Externas
parent: '0'
breadcrumb: 0 ‚Üí 5.0
type: modulo_padre
children_count: 10
descendants_count: 87
actors:
- admin
- operador
- cliente
domain:
- pagos
- facturacion
- firmas
- geo
- auth
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-01 23:42
summary: 'Integraciones externas: Stripe (pagos), Gigstack (CFDI), Mifiel (firmas),

  Supabase Auth, PDFme, Geolocalizaci√≥n, MercadoPago, Soporte Externo. Modelo de delegaci√≥n
  total.'
content_hash: f138288c25f15556
---

# 5.0 Integraciones Externas

> Sistema de integraciones que delega completamente el procesamiento de datos fiscales y firma digital a proveedores certificados, minimizando la responsabilidad legal y t√©cnica de OnlyCar.

---

## Principio de Delegaci√≥n Total

OnlyCar **NO procesa**:
- ‚ùå Datos fiscales de clientes (RFC, Raz√≥n Social, R√©gimen)
- ‚ùå Certificados digitales (e.firma/FIEL)
- ‚ùå Timbrado de CFDIs
- ‚ùå Aplicaci√≥n de firmas criptogr√°ficas

**Todo es delegado a proveedores certificados:**

| Proveedor    | Funci√≥n                                   | Certificaci√≥n          |
| ------------ | ----------------------------------------- | ---------------------- |
| **Stripe**   | Pasarela de pagos + captura datos fiscales | PCI-DSS Level 1        |
| **Gigstack** | Facturaci√≥n autom√°tica CFDI 4.0           | PAC autorizado por SAT |
| **Mifiel**   | Firma digital de contratos B2B            | PSC acreditado por SE  |

---

## Arquitectura de Integraciones

```mermaid
flowchart TD
    subgraph CORE["üè¢ ONLYCARNLD SISTEMA"]
        APP[Aplicaci√≥n PWA/Web]
    end
    
    subgraph PAGOS["üí≥ PAGOS"]
        STRIPE[Stripe<br/>PCI-DSS Level 1]
        MP[MercadoPago<br/>Point Terminal]
    end
    
    subgraph FISCAL["üìÑ FISCAL"]
        GIGSTACK[Gigstack<br/>PAC SAT]
    end
    
    subgraph LEGAL["‚úçÔ∏è LEGAL"]
        MIFIEL[Mifiel<br/>PSC acreditado]
    end
    
    subgraph GEO["üìç GEOLOCALIZACI√ìN"]
        GPS[Capacitor GPS]
        MAPS[OpenStreetMap]
    end
    
    subgraph AUTH["üîê AUTENTICACI√ìN"]
        SUPABASE[Supabase Auth]
        OAUTH[Google OAuth]
    end
    
    APP --> STRIPE
    APP --> MP
    APP --> GIGSTACK
    APP --> MIFIEL
    APP --> GPS
    APP --> MAPS
    APP --> SUPABASE
    SUPABASE --> OAUTH
    
    STRIPE --> |Link by Stripe<br/>Suscripciones| OUT1[Pagos Digitales]
    GIGSTACK --> |Autofactura<br/>CFDI 4.0| OUT2[Facturaci√≥n Autom√°tica]
    MIFIEL --> |e.firma<br/>Validez legal| OUT3[Contratos B2B]
    MP --> |Cobro presencial| OUT4[Pagos Efectivo/Tarjeta]
```

---

## Estructura de Hijos

| ID                                      | Nombre             | Descripci√≥n               | Nietos | Estado |
| --------------------------------------- | ------------------ | ------------------------- | ------ | ------ |
| [[Proyecto OnlyCarNLD/Datos/5.1. stripe_pagos\|5.1]]              | Stripe Pagos       | Pasarela de pagos         | 0 | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.2. gigstack_facturacion\|5.2]]      | Gigstack           | Facturaci√≥n autom√°tica    | 0      | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.3. mifiel_firmas\|5.3]]             | Mifiel             | Firma digital             | 0      | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.4. cumplimiento_legal_fiscal\|5.4]] | Cumplimiento Legal | LFPDPPP, CFF              | 0      | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.5. webhooks_integracion\|5.5]]      | Webhooks           | Webhooks de integraciones | 0      | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.6. autenticacion\|5.6]]             | Autenticaci√≥n      | OAuth + Email/Password    | 0 | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.7. pdfme_generacion\|5.7]]          | PDFme              | Generaci√≥n de PDFs        | 0      | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.8. geolocalizacion\|5.8]]           | Geolocalizaci√≥n    | GPS, mapas, tracking      | 0 | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.9 soporte_externo\|5.9]]            | Soporte Externo    | Tawk.to + Chatwoot        | 0 | ‚úÖ      |
| [[Proyecto OnlyCarNLD/Datos/5.11 mercadopago_integracion\|5.11]]  | MercadoPago        | Point Terminal + Checkout | 0 | ‚úÖ      |

---

## Ventajas del Modelo Delegado

**Reducci√≥n de complejidad:**

- ‚ùå **95% menos c√≥digo** de facturaci√≥n
- ‚ùå **90% menos responsabilidad legal**
- ‚ùå **Cero gesti√≥n de CSD** para timbrado
- ‚ùå **Cero gesti√≥n de certificados digitales**
- ‚ùå **Cero almacenamiento de datos fiscales** sensibles
- ‚ùå **Cero procesamiento de e.firma/FIEL**
- ‚ùå **Cero almacenamiento de credenciales** (OAuth delegado)

**Beneficios operativos:**

- ‚úÖ **Facturaci√≥n 100% autom√°tica**
- ‚úÖ **Firma de contratos 100% delegada**
- ‚úÖ **Validaci√≥n SAT en tiempo real**
- ‚úÖ **Cumplimiento autom√°tico** con cambios normativos
- ‚úÖ **Factura global mensual** autom√°tica
- ‚úÖ **Firmas con validez legal plena**
- ‚úÖ **Autenticaci√≥n dual** (OAuth + Email/Password blindado)
- ‚úÖ **Generaci√≥n PDF din√°mica** (PDFme)

---

## Costo-Beneficio

| M√©trica                             | Desarrollo Propio      | Modelo Delegado           |
| ----------------------------------- | ---------------------- | ------------------------- |
| Costo inicial                       | $150,000-250,000 MXN   | ~$0 MXN                   |
| Mantenimiento mensual               | $10,000-20,000 MXN     | ~$0 MXN                   |
| Por servicio B2C $1000              | N/A                    | ~$42-44 MXN (4.2-4.4%)    |
| Por servicio B2B $1000 + contrato   | N/A                    | ~$75-90 MXN (7.5-9%)      |
| ROI                                 | Negativo 1-2 a√±os      | Positivo desde mes 1      |

---

## Navegaci√≥n

| ‚¨ÜÔ∏è Padre             | [[Proyecto OnlyCarNLD/Datos/0. Contexualizador]]              |
| -------------------- | ----------------------------------- |
| ‚¨ÖÔ∏è Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/4.0. necesidades_del_sistema]]    |
| ‚û°Ô∏è Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/6.0. UI-UX]]                      |

---

**Versi√≥n:** 5.2 (+ Auth + PDFme)  
**Cumplimiento:** M√©xico - LFPDPPP 2025 / CFF / CFDI 4.0 / Ley de Firma Electr√≥nica Avanzada
