---
id: 5.8.2.3
title: Reconnection Strategy
parent: 5.8.2
breadcrumb: 0 → 5.0 → 5.8 → 5.8.2 → 5.8.2.3
type: estrategia
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-01 18:10
domain:
- realtime
- reconexion
- backoff
summary: Estrategia de reconexión automática.
content_hash: 9c1d95b8170611aa
---

# 5.8.2.3 Reconnection Strategy

Estrategia de reconexión automática para Supabase Realtime.

---

## Eventos de Desconexión

| Evento | Causa | Recuperación |
|--------|-------|--------------|
| `CLOSED` | WebSocket cerrado | Auto-reconectar |
| `CHANNEL_ERROR` | Error en canal | Re-suscribir |
| `TIMED_OUT` | Sin heartbeat | Recrear canal |

---

## Backoff Exponencial

```typescript
// utils/reconnection.ts
export const createReconnection = () => {
  let attempts = 0;
  const BASE = 1000;
  const MAX = 32000;
  
  return {
    getDelay: () => Math.min(BASE * Math.pow(2, attempts++), MAX),
    reset: () => { attempts = 0; }
  };
};
```

---

## Implementación

```typescript
const setupReconnection = (channel: RealtimeChannel) => {
  const { getDelay, reset } = createReconnection();
  
  channel.on('system', {}, ({ event }) => {
    if (event === 'disconnect') {
      const reconnect = async () => {
        await new Promise(r => setTimeout(r, getDelay()));
        try {
          await channel.subscribe();
          reset();
        } catch {
          reconnect();
        }
      };
      reconnect();
    }
  });
};
```

---

→ Ver: [[Proyecto OnlyCarNLD/Datos/5.8.7.2 network_offline]]

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/5.8.2 realtime_broadcast]]            |
| -------------------- | ---------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/5.8.2.2 payload_ubicacion]]              |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/5.8.2.4 error_handling]]              |
