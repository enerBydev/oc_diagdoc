---
id: 1.2.2.1.1.2
title: Formulario de Solicitud
parent: 1.2.2.1.1
breadcrumb: 0 → 1.0 → 1.2 → 1.2.2 → 1.2.2.1 → 1.2.2.1.1 → 1.2.2.1.1.2
type: hoja
status: activo
last_updated: 2026-01-29 15:31
file_create: 2025-12-27 00:22
domain:
- operador
- formulario
- solicitud
- datos
summary: 'Formulario 4 pasos: datos personales, ubicación, experiencia, disponibilidad.

  Incluye SQL modelo de datos y TypeScript composable.

  '
content_hash: 4db245e373b05263
---

# 1.2.2.1.1.2 Formulario de Solicitud

> Formulario para capturar datos del prospecto operador.

---

## Estructura del Formulario

### Sección 1: Datos Personales

| Campo | Tipo | Requerido | Validación |
|-------|------|-----------|------------|
| Nombre(s) | text | ✅ | Min 2 chars |
| Apellidos | text | ✅ | Min 2 chars |
| Teléfono | tel | ✅ | 10 dígitos MX |
| Email | email | ✅ | Email válido |
| Fecha nacimiento | date | ✅ | Mayor de 18 |

### Sección 2: Ubicación

| Campo | Tipo | Requerido | Validación |
|-------|------|-----------|------------|
| Estado | select | ✅ | Lista MX |
| Ciudad/Municipio | select | ✅ | Depende de estado |
| Código Postal | text | ✅ | 5 dígitos |
| Colonia | text | ❌ | - |

### Sección 3: Experiencia

| Campo | Tipo | Requerido | Validación |
|-------|------|-----------|------------|
| ¿Tienes experiencia? | radio | ✅ | Sí/No |
| Años de experiencia | number | Condicional | Si tiene exp. |
| Describe tu experiencia | textarea | Condicional | Si tiene exp. |
| ¿Tienes equipo propio? | radio | ✅ | Sí/No |

### Sección 4: Disponibilidad

| Campo | Tipo | Requerido | Validación |
|-------|------|-----------|------------|
| Días disponibles | checkbox[] | ✅ | Mín. 3 días |
| Horario preferido | select | ✅ | Mañana/Tarde/Ambos |
| ¿Tiempo completo? | radio | ✅ | Sí/No |

---

## UI del Formulario

```
┌─────────────────────────────────────────────────────────────────┐
│  SOLICITUD DE OPERADOR                                          │
│  Paso 1 de 4: Datos Personales                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Nombre(s) *                                                    │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ Juan Carlos                                             │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Apellidos *                                                    │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ García López                                            │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Teléfono *                                                     │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 867 123 4567                                            │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Email *                                                        │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ juan.garcia@email.com                                   │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  Fecha de nacimiento *                                          │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 15/03/1990                                              │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  [ ← Atrás ]                               [ Siguiente → ]      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Modelo de Datos

```sql
CREATE TABLE operador_solicitudes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- Datos personales
  nombre VARCHAR(100) NOT NULL,
  apellidos VARCHAR(100) NOT NULL,
  telefono VARCHAR(20) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE,
  fecha_nacimiento DATE NOT NULL,
  
  -- Ubicación
  estado_mexico VARCHAR(100) NOT NULL,
  ciudad VARCHAR(100) NOT NULL,
  ciudad_id UUID REFERENCES ciudades(id),  -- NULL si no existe
  codigo_postal VARCHAR(5),
  colonia VARCHAR(100),
  
  -- Experiencia
  tiene_experiencia BOOLEAN DEFAULT false,
  anos_experiencia INT,
  descripcion_experiencia TEXT,
  tiene_equipo BOOLEAN DEFAULT false,
  
  -- Disponibilidad
  dias_disponibles TEXT[],  -- ['lunes', 'martes', ...]
  horario_preferido VARCHAR(20),  -- 'manana', 'tarde', 'ambos'
  tiempo_completo BOOLEAN DEFAULT false,
  
  -- Estado
  estado VARCHAR(30) DEFAULT 'pendiente',
  
  -- Auth (después de crear cuenta)
  user_id UUID REFERENCES auth.users(id),
  
  -- Timestamps
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- Índices
CREATE INDEX idx_solicitudes_estado ON operador_solicitudes(estado);
CREATE INDEX idx_solicitudes_ciudad ON operador_solicitudes(ciudad_id);
```

---

## Composable

```typescript
// composables/useOperatorApplication.ts
interface SolicitudOperador {
  // Personales
  nombre: string;
  apellidos: string;
  telefono: string;
  email: string;
  fechaNacimiento: string;
  // Ubicación
  estadoMexico: string;
  ciudad: string;
  codigoPostal: string;
  colonia?: string;
  // Experiencia
  tieneExperiencia: boolean;
  anosExperiencia?: number;
  descripcionExperiencia?: string;
  tieneEquipo: boolean;
  // Disponibilidad
  diasDisponibles: string[];
  horarioPreferido: 'manana' | 'tarde' | 'ambos';
  tiempoCompleto: boolean;
}

export const useOperatorApplication = () => {
  const supabase = useSupabaseClient();
  const currentStep = ref(1);
  const formData = ref<Partial<SolicitudOperador>>({});
  
  const submitApplication = async () => {
    // 1. Verificar si ciudad existe
    const { data: ciudad } = await supabase
      .from('ciudades')
      .select('id, estado')
      .eq('nombre', formData.value.ciudad)
      .in('estado', ['activa', 'piloto'])
      .single();
    
    // 2. Crear solicitud
    const { data, error } = await supabase
      .from('operador_solicitudes')
      .insert({
        ...formData.value,
        ciudad_id: ciudad?.id || null,
        estado: ciudad ? 'pendiente' : 'ciudad_no_disponible'
      })
      .select()
      .single();
    
    if (!error) {
      if (!ciudad) {
        // Redirigir a lista de espera
        navigateTo('/operador/lista-espera');
      } else {
        // Continuar con verificación
        navigateTo('/operador/verificacion');
      }
    }
    
    return { data, error };
  };
  
  const validateStep = (step: number): boolean => {
    // Validaciones por paso
    switch (step) {
      case 1: // Datos personales
        return !!(
          formData.value.nombre &&
          formData.value.apellidos &&
          formData.value.telefono?.length === 10 &&
          formData.value.email &&
          isAdult(formData.value.fechaNacimiento)
        );
      case 2: // Ubicación
        return !!(
          formData.value.estadoMexico &&
          formData.value.ciudad
        );
      case 3: // Experiencia
        return formData.value.tieneExperiencia !== undefined;
      case 4: // Disponibilidad
        return (formData.value.diasDisponibles?.length || 0) >= 3;
      default:
        return true;
    }
  };
  
  return {
    currentStep,
    formData,
    submitApplication,
    validateStep,
    nextStep: () => currentStep.value++,
    prevStep: () => currentStep.value--
  };
};
```

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/1.2.2.1.1 flujo_solicitud]]        |
| -------------------- | ------------------------------------ |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/1.2.2.1.1.1 landing_prospecto]]    |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/1.2.2.1.1.3 deteccion_ciudad]]     |

---
