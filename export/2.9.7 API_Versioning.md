---
id: 2.9.7
title: API Versioning
parent: '2.9'
breadcrumb: 0 → 2.0 → 2.9 → 2.9.7
type: arquitectura
children_count: 0
descendants_count: 0
status: activo
domain:
- api
- versioning
- backend
- nitro
actors:
- backend-dev
summary: 'Estrategia de versionado de API: Rutas v1/v2 y cabeceras de deprecación.'
last_updated: 2026-01-29 15:32
file_create: 2026-01-23 03:20
content_hash: e31c9206d0fe0bdd
---

# 2.9.7 API Versioning

> Las APIs son para siempre (o casi). El versionado evita romper clientes antiguos (Mobile Apps no actualizadas).

---

## Estrategia de Versionado

Usamos **URI Versioning** por claridad explícita.

- `https://api.onlycar.mx/v1/orders`
- `https://api.onlycar.mx/v2/orders`

---

## Estructura en Nitro

```
server/
  api/
    v1/
      orders/
        index.get.ts
        index.post.ts
    v2/
      orders/
        index.get.ts  <-- Nueva estructura
```

---

## Deprecación Suave

Cuando una versión va a morir:

1. **Header Warning:** Agregar `Warning: 299 - "This endpoint is deprecated"`
2. **Sunset Header:** `Sunset: Sat, 31 Dec 2026 23:59:59 GMT`
3. **Comunicación:** Email a devs/partnerts con 6 meses de antelación.

---

## Backward Compatibility

Regla de oro: **Nunca romper la respuesta de una versión existente.**
- ✅ Agregar campos nuevos (non-breaking).
- ❌ Renombrar campos.
- ❌ Cambiar tipos de datos (string -> int).
- ❌ Hacer obligatorio un campo opcional.

Si necesitas hacer ❌, crea `v+1`.

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.9. Arquitectura_Backend]]    |
| -------------------- | -------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.9.6 WebSocket_Architecture]] |
| ➡️ Hermano siguiente | *(Último hijo de 2.9)*           |

---
