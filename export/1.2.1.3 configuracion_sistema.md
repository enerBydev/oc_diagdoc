---
id: 1.2.1.3
title: Configuraci√≥n del Sistema
parent: 1.2.1
breadcrumb: 0 ‚Üí 1.0 ‚Üí 1.2 ‚Üí 1.2.1 ‚Üí 1.2.1.3
type: config
status: activo
last_updated: 2026-01-29 16:01
file_create: 2026-01-09 12:30
domain:
- admin
- configuraci√≥n
- par√°metros
- precios
- zonas
summary: 'Motor de reglas y par√°metros globales que gobiernan la l√≥gica de negocio.

  Permite ajustar precios, zonas, horarios y reglas operativas sin redestribuir c√≥digo.

  Incluye diagrama de impacto de configuraciones.

  '
content_hash: 03b37a033825e458
---

# 1.2.1.3 Configuraci√≥n del Sistema

> **Prop√≥sito:** Proveer flexibilidad operativa total sin dependencia de desarrollo ("No-Code tweaks"). Permitir que el negocio reaccione al mercado instant√°neamente.

---

## 1. Alcance de la Configuraci√≥n

La configuraci√≥n no es solo est√©tica; controla la l√≥gica financiera y operativa cr√≠tica.

```mermaid
graph TD
    Config[‚öôÔ∏è Configuraci√≥n Maestra]
    
    subgraph Financiero
    Config --> Precios[Precios Base & Factores]
    Config --> Descuentos[C√≥digos Promo %]
    Config --> Comisiones[Comisi√≥n Operador %]
    end
    
    subgraph Operativo
    Config --> Zonas[Pol√≠gonos Cobertura Geo]
    Config --> Horarios[Horarios & Festivos]
    Config --> SLAs[Tiempos M√°ximos Atenci√≥n]
    end
    
    subgraph Sistema
    Config --> Versiones[Versi√≥n M√≠nima App]
    Config --> Features[Feature Flags]
    end
    
    Precios --> AppCliente
    Zonas --> AppCliente
    Zonas --> AppOperador
    Versiones --> BloqueoLogin
```

---

## 2. Gesti√≥n de Precios Din√°micos

‚Üí Fuente de Verdad T√©cnica: [[Proyecto OnlyCarNLD/Datos/3.1.1 config_precios_v3.2]]

El administrador tiene una interfaz tipo hoja de c√°lculo para ajustar:

### Matriz de Precios Base
Permite editar el costo base por tipo de servicio. Cambios se reflejan en tiempo real para nuevas cotizaciones.
*   Lavado B√°sico: `$150`
*   Lavado Premium: `$250`
*   Detallado Interior: `$600`

### Factores Multiplicadores
Variables que ajustan el precio base seg√∫n condiciones:
*   **Veh√≠culo:** SUV (x1.2), Pick-up (x1.3), Moto (x0.7).
*   **Zona:** Zona Cumbres (+$50 log√≠stica), Zona Centro (+$0).
*   **Demanda (Surge Pricing):** Manual o Autom√°tico (x1.1 a x1.5 en alta demanda).

---

## 3. Gesti√≥n de Zonas (Geofencing)

Interfaz de mapa interactivo (Google Maps API) para dibujar pol√≠gonos de servicio.

- **Zonas Activas:** Donde se permite solicitar servicio. Al guardar, actualiza el backend geoespacial.
- **Zonas Sombra:** Zonas vetadas por seguridad o log√≠stica (aunque est√©n dentro de una activa).
- **Asignaci√≥n de Operadores:** Vincular operadores preferentes a zonas espec√≠ficas.

---

## 4. Feature Flags (Interruptores)

Permite encender/apagar funcionalidades para controlar despliegues o reaccionar a fallos.

| Flag | Descripci√≥n | Estado Default | Uso |
|------|-------------|----------------|-----|
| `ENABLE_B2B_REGISTRATION` | Registro auto-servicio B2B | OFF | Activar cuando el portal B2B est√© estable. |
| `ENABLE_STRIPE_PAYMENTS` | Cobros con tarjeta | ON | Apagar en caso de fallo masivo de API Stripe. |
| `REQUIRE_VERIFF_KYC` | Validaci√≥n forzosa de ID | ON | Apagar si Veriff cae, para permitir onboarding manual. |

---

## 5. Auditor√≠a y Seguridad (Audit Logs)

Dado que estos cambios afectan la facturaci√≥n, **todo cambio queda registrado**.

- **Qui√©n:** `admin@onlycar.mx`
- **Qu√©:** Cambi√≥ `PRECIO_BASE_LAVADO` de 140 a 150.
- **Cu√°ndo:** 2026-01-09 14:30.
- **Raz√≥n:** "Ajuste inflacionario anual" (Campo obligatorio al guardar).

### Rollback
El sistema permite "Revertir a configuraci√≥n del [Fecha]" en caso de error humano.

---

## Navegaci√≥n

| Elemento | Enlace |
|----------|--------|
| ‚¨ÜÔ∏è Padre | [[Proyecto OnlyCarNLD/Datos/1.2.1 admin_perfil]] |
| ‚¨ÖÔ∏è Anterior | [[Proyecto OnlyCarNLD/Datos/1.2.1.2 alertas_admin]] |
| üîó T√©cnico | [[Proyecto OnlyCarNLD/Datos/3.1.1 config_precios_v3.2]] |
