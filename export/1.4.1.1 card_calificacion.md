---
id: 1.4.1.1
title: CARD de Calificaci√≥n
parent: 1.4.1
breadcrumb: 0 ‚Üí 1.0 ‚Üí 1.4 ‚Üí 1.4.1 ‚Üí 1.4.1.1
type: feature
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-10 01:12
domain:
- feedback
- ui
- cards
actors:
- cliente_b2c
- cliente_b2b
summary: Implementaci√≥n t√©cnica del CARD interactivo de calificaci√≥n post-servicio.
  Estados, animaciones, variantes y acciones.
content_hash: 345fc588cede97b7
---

# 1.4.1.1 CARD de Calificaci√≥n

> Componente interactivo que solicita calificaci√≥n al cliente despu√©s de un servicio.

---

## Anatom√≠a del CARD

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚≠ê ¬øC√ìMO FUE TU EXPERIENCIA?                    [Estado: Pendiente]
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Servicio: Lavado Express                               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Operador: Carlos M.                                    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Fecha: 15 Enero 2026                                   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ        ‚òÜ    ‚òÜ    ‚òÜ    ‚òÜ    ‚òÜ                                   ‚îÇ
‚îÇ        1    2    3    4    5                                    ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  [ Calificar despu√©s ]                                  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Estados del CARD

```mermaid
stateDiagram-v2
    [*] --> pendiente
    pendiente --> en_progreso: Usuario toca estrella
    en_progreso --> completado: Env√≠a calificaci√≥n
    pendiente --> pospuesto: "Calificar despu√©s"
    pospuesto --> pendiente: Recordatorio
    pendiente --> expirado: 7 d√≠as sin acci√≥n
    expirado --> [*]
    completado --> [*]
```

| Estado | Color | Icono | Acci√≥n |
|--------|-------|-------|--------|
| `pendiente` | Azul | ‚≠ê | Esperando interacci√≥n |
| `en_progreso` | Amarillo | ‚è≥ | Usuario seleccionando |
| `completado` | Verde | ‚úÖ | Calificaci√≥n enviada |
| `pospuesto` | Gris | üîî | Recordar m√°s tarde |
| `expirado` | Rojo tenue | ‚è∞ | Sin calificaci√≥n |

---

## Componente Vue

```vue
<template>
  <MessageCard 
    :tipo="'solicitud_calificacion'"
    :estado="estado"
    :expandido="expandido"
  >
    <template #header>
      <div class="flex items-center gap-2">
        <Star class="text-yellow-500" />
        <span>¬øC√≥mo fue tu experiencia?</span>
      </div>
    </template>
    
    <template #body>
      <div class="servicio-info">
        <p><strong>{{ data.servicio_nombre }}</strong></p>
        <p class="text-sm text-muted">
          con {{ data.operador_nombre }} ‚Ä¢ {{ formatDate(data.fecha_servicio) }}
        </p>
      </div>
      
      <StarRating 
        v-model="estrellas"
        :size="32"
        @change="onEstrellasChange"
      />
      
      <Button 
        v-if="!estrellas"
        variant="ghost"
        @click="posponer"
      >
        Calificar despu√©s
      </Button>
    </template>
  </MessageCard>
</template>

<script setup lang="ts">
interface CalificacionCardData {
  servicio_id: string;
  servicio_nombre: string;
  operador_nombre: string;
  fecha_servicio: string;
  ya_calificado: boolean;
}

const props = defineProps<{
  data: CalificacionCardData;
}>();

const estrellas = ref(0);
const estado = ref<'pendiente' | 'en_progreso' | 'completado'>('pendiente');

const onEstrellasChange = (value: number) => {
  estado.value = 'en_progreso';
  // Continuar al flujo de calificaci√≥n
  emit('continuar', { estrellas: value });
};

const posponer = () => {
  emit('posponer');
};
</script>
```

---

## Animaciones

| Transici√≥n | Duraci√≥n | Easing |
|------------|----------|--------|
| Aparici√≥n | 300ms | ease-out |
| Estrella hover | 150ms | ease-in-out |
| Estrella select | 200ms | bounce |
| Expandir comentario | 250ms | ease-out |
| Completado (checkmark) | 400ms | spring |

```css
.star-rating .star {
  transition: transform 150ms ease-in-out, color 150ms ease-in-out;
}

.star-rating .star:hover {
  transform: scale(1.2);
}

.star-rating .star.selected {
  animation: star-bounce 200ms ease-out;
  color: #fbbf24; /* yellow-400 */
}

@keyframes star-bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.3); }
}
```

---

## Variantes del CARD

| Variante | Cu√°ndo | Diferencia Visual |
|----------|--------|-------------------|
| `default` | Normal | Est√°ndar |
| `reminder` | Recordatorio | Badge "üì¢ Recordatorio" |
| `urgent` | √öltima oportunidad | Borde rojo, "‚è∞ √öltima oportunidad" |
| `incentive` | Con incentivo | "üéÅ +10 puntos por calificar" |

---

## Modelo de Datos

```typescript
interface CalificacionCard extends BaseCard {
  tipo: 'solicitud_calificacion';
  data: {
    servicio_id: string;
    servicio_nombre: string;
    operador_id: string;
    operador_nombre: string;
    fecha_servicio: string;
    ya_calificado: boolean;
    variante: 'default' | 'reminder' | 'urgent' | 'incentive';
    incentivo_puntos?: number;
  };
  estado: 'pendiente' | 'en_progreso' | 'completado' | 'pospuesto' | 'expirado';
  acciones: ['calificar', 'posponer', 'omitir'];
}
```

---

## Navegaci√≥n

| ‚¨ÜÔ∏è Padre | [[Proyecto OnlyCarNLD/Datos/1.4.1 flujo_calificacion]] |
|----------|------------------------------|
| ‚û°Ô∏è Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/1.4.1.2 evaluacion_operador]] |

---
