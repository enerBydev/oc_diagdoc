---
id: 2.6.1.2
title: Geolocation Advanced
parent: 2.6.1
breadcrumb: 0 → 2.0 → 2.6 → 2.6.1 → 2.6.1.2
type: especificacion
domain:
- geolocation
- gps
- tracking
- battery
status: activo
last_updated: 2026-01-29 15:31
file_create: 2026-01-05 03:30
summary: 'Estrategias avanzadas de geolocalización.

  WatchPosition vs GetCurrentPosition y consumo de batería.'
content_hash: 543d93a82d784a8d
---

# 2.6.1.2 Geolocation Advanced

> Saber dónde está el operador sin drenar la batería en 1 hora.

---

## Estrategia de Tracking

No usamos `getCurrentPosition()` en loop. Usamos `watchPosition()`.

```ts
const watchId = await Geolocation.watchPosition({
  enableHighAccuracy: true,
  timeout: 10000,
  maximumAge: 0
}, (position, err) => {
  if (position) {
    emitToSupabase(position.coords);
  }
});
```

### Optimización de Batería

El plugin nativo de Capacitor maneja el ciclo de vida.
*   **Foreground:** Alta precisión (GPS).
*   **Background:** El OS (iOS/Android) puede matar el proceso si no se declara un "Foreground Service" (solo Android). Para iOS, el tracking de background perfecto requiere permisos muy intrusivos ("Always Allow"), por lo que diseñamos la app para tracking principalmente en Foreground ("En Camino").

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.6.1 Plugins_Nativos]]       |
| -------------------- | ------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.6.1.1 Camera_Gallery]]      |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/2.6.1.3 Push_Notifications]]  |

---
