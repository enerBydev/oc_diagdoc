---
id: 3.1.7.2.1
title: Cรกlculo de Margen
parent: 3.1.7.2
breadcrumb: 0 โ 3.0 โ 3.1 โ 3.1.7 โ 3.1.7.2 โ 3.1.7.2.1
type: hoja
status: activo
last_updated: 2026-01-29 15:31
file_create: 2025-12-27 14:03
domain:
- margenes
- calculo
- formulas
actors:
- admin
summary: 'Fรณrmula detallada para calcular mรกrgenes por servicio.

  Incluye desglose de costos y UI visualizaciรณn.'
content_hash: bd3d5bca02884ea4
---

# 3.1.7.2.1 Cรกlculo de Margen

Fรณrmula detallada para calcular mรกrgenes.

---

## Ejemplo: Lavado Exterior Bรกsico ($290)

```
INGRESOS:
  Precio cliente:              $290.00

COSTOS DIRECTOS:
  โโโ Materiales:              -$20.10
  โโโ Tiempo (20 min):         -$31.25
  โโโ Desgaste equipo:         -$4.25
  Subtotal directos:           -$55.60

COMISIรN OPERADOR (43% pirita):
  โโโ Base modelo hรญbrido:     -$124.70

GASTOS INDIRECTOS (13.1%):
  โโโ Pasarela, infra, etc:    -$37.99

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
 UTILIDAD ONLYCAR:              $71.71 (24.7%)
```

> [!NOTE]
> **Con 43% de comisiรณn (Pirita), el margen es saludable (~25%).**
> Modelo ajustado para sostenibilidad a escala nacional.

---

## Funciรณn de Cรกlculo

```typescript
interface MargenResult {
  precioCliente: number;
  costosDirectos: number;
  comisionOperador: number;
  gastosIndirectos: number;
  utilidadOnlyCar: number;
  margenPorcentaje: number;
  esRentable: boolean;
}

const calcularMargen = (
  servicio: Servicio,
  nivelOperador: NivelOperador
): MargenResult => {
  const precioCliente = servicio.precioBase;
  
  // Costos directos
  const materiales = getCostoMateriales(servicio.id);
  const tiempo = servicio.duracion.servicioMinutos * VALOR_MINUTO;
  const desgaste = getCostoDesgaste(servicio.id);
  const costosDirectos = materiales + tiempo + desgaste;
  
  // Comisiรณn operador
  const porcentajeComision = getComisionNivel(nivelOperador);
  const comisionOperador = precioCliente * (porcentajeComision / 100);
  
  // Gastos indirectos
  const gastosIndirectos = precioCliente * FACTOR_INDIRECTOS;
  
  // Utilidad
  const utilidadOnlyCar = precioCliente - comisionOperador - gastosIndirectos;
  const margenPorcentaje = (utilidadOnlyCar / precioCliente) * 100;
  
  return {
    precioCliente,
    costosDirectos,
    comisionOperador,
    gastosIndirectos,
    utilidadOnlyCar,
    margenPorcentaje,
    esRentable: margenPorcentaje >= MARGEN_MINIMO_REQUERIDO
  };
};
```

---

## UI: Desglose de Margen

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ANรLISIS: LAVADO EXTERIOR BรSICO                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                 โ
โ  Precio cliente:           $290.00                              โ
โ                                                                 โ
โ  โโโ DESGLOSE โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ Operador 43%      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ Indirectos 13%โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ Materiales 7% โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ Tiempo 11%    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ Desgaste 1%   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ MARGEN 25%        โ
โ                                                                 โ
โ  โ MARGEN SALUDABLE โ Modelo sostenible                        โ
โ                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Navegaciรณn

| โฌ๏ธ Padre             | [[Proyecto OnlyCarNLD/Datos/3.1.7.2 margenes_ganancia]]       |
| -------------------- | ----------------------------------- |
| โก๏ธ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.1.7.2.2 punto_equilibrio]]      |

---
