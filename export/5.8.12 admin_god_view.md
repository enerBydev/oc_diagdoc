---
id: 5.8.12
title: Admin God View
parent: '5.8'
breadcrumb: 0 ‚Üí 5.0 ‚Üí 5.8 ‚Üí 5.8.12
type: hoja
status: activo
children_count: 0
descendants_count: 0
domain:
- admin
- dashboard
- monitoreo
- seguridad
summary: Dashboard de supervisi√≥n global "Ojo de Dios" para administradores.
last_updated: 2026-01-29 15:32
content_hash: af804016b92b3616
---

# 5.8.12 Admin God View

Dashboard conocido internamente como "La Torre de Control" o "God View". Permite a los administradores visualizar la operaci√≥n completa en tiempo real y gestionar incidentes de seguridad.

---

## 1. Visualizaci√≥n Geoespacial (El Mapa)

### 1.1 Mapa de Calor y Clusters
No mostramos 1000 pines individuales si la vista est√° alejada (Zoom Out).
*   **Clusterizaci√≥n:** Agrupamos operadores cercanos en burbujas con contador (ej. "(15)").
*   **C√≥digo de Colores (Status):**
    *   üü¢ **Verde:** En servicio / Disponible.
    *   üîµ **Azul:** En camino (Ruta normal).
    *   üü° **Amarillo:** Detenido (Tr√°fico o pausa corta).
    *   üî¥ **Rojo:** Incidente (Watchtower Alert: Parada larga, Desv√≠o, P√°nico).
    *   ‚ö´ **Gris:** Offline / Sin se√±al.

### 1.2 Detalle de Operador ("Drill Down")
Al hacer clic en un operador:
*   Foto y Nombre.
*   Servicio actual (ID, Cliente).
*   Bater√≠a del dispositivo (Dato cr√≠tico de seguridad).
*   √öltima conexi√≥n (Heartbeat).
*   **Botones Acci√≥n:** "Llamar", "Mensaje Prioritario", "Ver Historial".

---

## 2. Panel de Incidentes (Watchtower Feed)

Barra lateral derecha con lista de alertas activas generadas por [[Proyecto OnlyCarNLD/Datos/5.8.10 watchtower_algorithm]].

*   **Prioridad Alta:** Botones de p√°nico, desconexiones largas en ruta.
*   **Prioridad Media:** Retrasos en ETA, desv√≠os de ruta.
*   **Prioridad Baja:** Bater√≠a baja (< 15%).

---

## 3. Integraci√≥n T√©cnica

Este dashboard es un **consumidor masivo** de datos.

### 3.1 Flujo de Datos
```mermaid
flowchart LR
    A[üì± Capacitor Ops] -->|1. Loc Update| B(‚òÅÔ∏è Supabase DB)
    B -->|2. Realtime Broadcast| C{üñ•Ô∏è Admin Dashboard}
    D[üóÑÔ∏è PostGIS Snapshot] -->|0. Carga Inicial| C
    E[üëÆ Watchtower] -->|3. Alertas| C
```

*   **Realtime:** Suscripci√≥n al canal global `admin:tracking` de Supabase Broadcast.
*   **Snapshot:** Carga inicial de posiciones desde Tabla `ultima_ubicacion_operadores` (PostGIS).
*   **Rendimiento:**
    *   Uso de `Canvas` rendering en Leaflet/Mapbox para soportar > 500 marcadores m√≥viles sin lag.
    *   Throttling de actualizaciones visuales (FPS limitados) para no congelar el navegador del admin.

---

## Navegaci√≥n

| ‚¨ÜÔ∏è Padre             | [[Proyecto OnlyCarNLD/Datos/5.8. geolocalizacion]]            |
| -------------------- | ----------------------------------- |
| ‚¨ÖÔ∏è Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/5.8.11 client_timeline_ui]]       |
| ‚û°Ô∏è Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/5.9 soporte_externo]]             |
