---
id: 1.3.11.1
title: Notificaciones Operador
parent: 1.3.11
breadcrumb: 0 ‚Üí 1.0 ‚Üí 1.3 ‚Üí 1.3.11 ‚Üí 1.3.11.1
type: feature
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-09 21:20
domain:
- comunicacion
- operador
- notificaciones
- mobile
summary: 'Manejo de notificaciones push en la app del operador.

  Cubre foreground, background, quick actions y persistencia.

  '
content_hash: 7889beebdfc2659d
---

# 1.3.11.1 Notificaciones Operador

> **Prop√≥sito:** Asegurar que el operador nunca pierda una solicitud de servicio, incluso con la app cerrada o el tel√©fono bloqueado.

---

## 1. Criticidad de las Notificaciones

Para el operador, las notificaciones son **ingreso directo**. Una notificaci√≥n perdida = una oportunidad de trabajo perdida.

| Escenario | Impacto |
|-----------|---------|
| App abierta (foreground) | Notificaci√≥n in-app inmediata |
| App en background | Push notification + sonido |
| Tel√©fono bloqueado | Push persistente en lock screen |
| App cerrada (killed) | Push con alta prioridad + wake |

---

## 2. Tipos de Notificaci√≥n

| Tipo | Sonido | Vibraci√≥n | Persistencia |
|------|--------|-----------|--------------|
| **Nueva solicitud** | Distintivo üîî | Patr√≥n largo | Muy alta |
| **Mensaje de cliente** | Normal | Corta | Media |
| **Recordatorio cita** | Suave | Doble | Alta |
| **Pago recibido** | Celebraci√≥n üéâ | Corta | Baja |
| **Alerta sistema** | Urgente ‚ö†Ô∏è | Continua | Muy alta |

---

## 3. Quick Actions desde Notificaci√≥n

El operador puede actuar sin abrir la app:

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üöó NUEVA SOLICITUD                                     ‚îÇ
‚îÇ  Lavado Express ‚Ä¢ Col. Centro ‚Ä¢ $299                    ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ  ‚úÖ ACEPTAR   ‚îÇ  ‚îÇ  ‚è≠Ô∏è PASAR     ‚îÇ                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  Expira en 4:32                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Implementaci√≥n Capacitor

```typescript
// plugins/pushNotifications.ts
import { PushNotifications } from '@capacitor/push-notifications';

PushNotifications.addListener('pushNotificationActionPerformed', (notification) => {
  const { actionId, data } = notification;
  
  switch (actionId) {
    case 'accept':
      acceptSolicitud(data.solicitudId);
      break;
    case 'pass':
      passSolicitud(data.solicitudId);
      break;
    default:
      // Abrir app en la solicitud
      navigateTo(`/operador/solicitudes/${data.solicitudId}`);
  }
});
```

---

## 4. Sonidos Distintivos

Cada tipo de notificaci√≥n tiene sonido √∫nico para reconocimiento auditivo:

| Tipo | Archivo | Duraci√≥n | Descripci√≥n |
|------|---------|----------|-------------|
| Nueva solicitud | `new_request.mp3` | 1.2s | Dos tonos ascendentes |
| Mensaje cliente | `message.mp3` | 0.3s | Pop suave |
| Pago recibido | `payment.mp3` | 0.8s | Campanas celebraci√≥n |
| Alerta urgente | `urgent.mp3` | 2.0s | Alarma repetitiva |

Archivos en `/public/sounds/` con formato MP3 para compatibilidad universal.

---

## 5. Persistencia cuando App Cerrada

### Android (Firebase Cloud Messaging)

```typescript
// android/app/src/main/java/MyFirebaseMessagingService.kt
class MyFirebaseMessagingService : FirebaseMessagingService() {
    override fun onMessageReceived(remoteMessage: RemoteMessage) {
        if (remoteMessage.data["type"] == "new_solicitud") {
            // Notificaci√≥n de alta prioridad que sobrevive Doze mode
            createHighPriorityNotification(remoteMessage)
        }
    }
}
```

### iOS (APNs)

```json
{
  "aps": {
    "alert": {
      "title": "Nueva Solicitud",
      "body": "Lavado Express en Col. Centro"
    },
    "sound": "new_request.caf",
    "content-available": 1,
    "mutable-content": 1,
    "interruption-level": "time-sensitive"
  }
}
```

---

## 6. Configuraci√≥n por Operador

El operador puede personalizar en Ajustes:

- **Horario activo:** Solo recibir entre 8am - 8pm
- **Tipos de servicio:** Solo Lavado Express y Premium
- **Zona:** Solo notificar si est√° a < 5km
- **Sonidos:** Activar/desactivar por tipo

---

## Navegaci√≥n

| Elemento | Enlace |
|----------|--------|
| ‚¨ÜÔ∏è Padre | [[Proyecto OnlyCarNLD/Datos/1.3.11 chat_operador_vista]] |
| üîó Relacionado | [[Proyecto OnlyCarNLD/Datos/1.3.6.1.4 broadcast_solicitud]] |
