---
id: 2.6.1.4
title: Biometric Auth
parent: 2.6.1
breadcrumb: 0 → 2.0 → 2.6 → 2.6.1 → 2.6.1.4
type: configuracion
children_count: 0
descendants_count: 0
status: activo
domain:
- mobile
- biometrics
- face-id
- touch-id
actors:
- mobile-dev
- seguridad
summary: Implementación de autenticación biométrica nativa (FaceID/TouchID) usando
  Capacitor.
last_updated: 2026-01-29 15:32
file_create: 2026-01-23 03:00
content_hash: a63924374ee63698
---

# 2.6.1.4 Biometric Auth

> Acceso rápido y seguro usando el hardware del dispositivo.

---

## Plugin Capacitor

Usamos `@capacitor-community/native-biometric` (o la API oficial `@capacitor/preferences` + lógica custom). Recomendamos el plugin oficial si está disponible, o el comunitario verificado.

**Librería:** `@capacitor-community/native-biometric`

```bash
npm install @capacitor-community/native-biometric
npx cap sync
```

---

## Flujo de Implementación

```mermaid
sequenceDiagram
    participant User
    participant App
    participant OS
    participant SecureStore

    User->>App: Abrir App
    App->>SecureStore: ¿Token Guardado?
    SecureStore-->>App: Sí (Encrypted)
    
    App->>OS: Solicitar Biometría
    OS->>User: FaceID / Huella prompt
    User->>OS: Biometría válida
    OS-->>App: Success
    
    App->>SecureStore: Desencriptar Token
    App->>App: Auto Login
```

---

## Código de Ejemplo

```typescript
// composables/useBiometrics.ts
import { NativeBiometric } from '@capacitor-community/native-biometric';

export function useBiometrics() {
  const isAvailable = ref(false);

  async function checkAvailability() {
    const result = await NativeBiometric.isAvailable();
    isAvailable.value = result.isAvailable;
  }

  async function biometricLogin(): Promise<string | null> {
    if (!isAvailable.value) return null;

    try {
      const verified = await NativeBiometric.verifyIdentity({
        reason: "Ingresa a OnlyCar",
        title: "Autenticación Biométrica",
        subtitle: "Usa FaceID o Huella",
        description: "Confirma tu identidad para acceder"
      });

      if (verified) {
        // Recuperar credenciales del Secure Storage
        return await SecureStorage.get('session_token');
      }
    } catch (error) {
      console.error('Biometric failed', error);
    }
    return null;
  }

  return { isAvailable, biometricLogin, checkAvailability };
}
```

---

## Fallback

Si la biometría falla o no está configurada, **siempre** debe existir el fallback a PIN o Contraseña.

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.6.1 Plugins_Nativos]] |
| -------------------- | ------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.6.1.3 Push_Notifications]] |
| ➡️ Hermano siguiente | *(Último hijo de 2.6.1)*  |

---
