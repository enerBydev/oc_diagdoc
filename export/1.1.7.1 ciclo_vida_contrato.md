---
id: 1.1.7.1
title: Ciclo de Vida del Contrato
parent: 1.1.7
breadcrumb: 0 ‚Üí 1.0 ‚Üí 1.1 ‚Üí 1.1.7 ‚Üí 1.1.7.1
type: proceso
status: activo
last_updated: 2026-01-29 15:31
file_create: 2025-12-23 10:52
domain:
- contratos
- estados
- workflow
summary: 'Estados del contrato B2B: borrador, pendiente firma, activo, expirado,

  cancelado, renovado. Transiciones y alertas autom√°ticas.

  '
content_hash: f4f18876223371bd
---

# 1.1.7.1 Ciclo de Vida del Contrato

> Detalle de cada estado y las transiciones permitidas.

---

## Diagrama de Estados

```mermaid
flowchart TD
    INICIO([INICIO]) --> DRAFT[üìù BORRADOR<br/>draft]
    DRAFT -->|Eliminar| DEL[ELIMINADO]
    DRAFT -->|Admin env√≠a| PENDING[‚è≥ PENDIENTE FIRMA<br/>pending_signature]
    PENDING -->|Rechazado/Expira| CANCELLED[‚ùå CANCELADO<br/>cancelled]
    PENDING -->|Ambos firmaron| ACTIVE[‚úÖ ACTIVO<br/>active]
    ACTIVE -->|Vence fecha| EXPIRED[‚åõ EXPIRADO<br/>expired]
    ACTIVE -->|Terminaci√≥n| CANCELLED
    ACTIVE -->|Nuevo per√≠odo| RENEWED[üîÑ RENOVADO<br/>renewed]
    ACTIVE -->|Renovar con cambios| DRAFT
    EXPIRED -->|Renovaci√≥n| RENEWED
```

---

## Detalle de Estados

### 1. Borrador (`draft`)

| Aspecto | Detalle |
|---------|---------|
| **Entrada** | Admin crea nuevo contrato |
| **Acciones** | Editar campos, Vista previa, Eliminar, Enviar a firma |
| **Duraci√≥n** | Sin l√≠mite |
| **Salidas** | ‚Üí `pending_signature` (enviar) o Eliminado |

### 2. Pendiente Firma (`pending_signature`)

| Aspecto | Detalle |
|---------|---------|
| **Entrada** | Admin env√≠a contrato a Mifiel |
| **Acciones** | Ver estado de firmas, Cancelar, Reenviar invitaci√≥n |
| **Duraci√≥n** | Hasta que ambos firmen o se cancele |
| **Salidas** | ‚Üí `active` (firmado) o `cancelled` (cancelado/expirado) |

### 3. Activo (`active`)

| Aspecto | Detalle |
|---------|---------|
| **Entrada** | Ambas partes firmaron |
| **Acciones** | Consultar, Descargar PDF, Programar renovaci√≥n |
| **Duraci√≥n** | Hasta fecha de vencimiento |
| **Salidas** | ‚Üí `expired`, `cancelled`, o `renewed` |

### 4. Expirado (`expired`)

| Aspecto | Detalle |
|---------|---------|
| **Entrada** | Fecha de vencimiento alcanzada sin renovaci√≥n |
| **Acciones** | Consultar, Renovar (crea nuevo), Archivar |
| **Duraci√≥n** | Permanente |
| **Salidas** | ‚Üí `renewed` (si se renueva) |

### 5. Cancelado (`cancelled`)

| Aspecto | Detalle |
|---------|---------|
| **Entrada** | Terminaci√≥n anticipada o rechazo de firma |
| **Acciones** | Solo consulta |
| **Duraci√≥n** | Permanente |
| **Salidas** | Ninguna (estado final) |

### 6. Renovado (`renewed`)

| Aspecto | Detalle |
|---------|---------|
| **Entrada** | Se cre√≥ nuevo contrato que reemplaza este |
| **Acciones** | Solo consulta, Ver contrato sucesor |
| **Duraci√≥n** | Permanente |
| **Salidas** | Ninguna (estado final) |

---

## Alertas Autom√°ticas

| Evento | D√≠as antes | Canal | Destinatario |
|--------|------------|-------|--------------|
| Pr√≥ximo vencimiento | -30 | Email + App | Admin + Cliente |
| Pr√≥ximo vencimiento | -15 | Email + App | Admin + Cliente |
| Pr√≥ximo vencimiento | -7 | Email + Push | Admin + Cliente |
| Vence ma√±ana | -1 | Email + Push + SMS | Admin |
| Venci√≥ hoy | 0 | Email | Admin |
| Firma pendiente | +3 d√≠as sin firma | Email | Firmante pendiente |
| Firma pendiente | +7 d√≠as sin firma | Email | Admin (alerta) |

---

## Reglas de Transici√≥n

| Regla | Descripci√≥n |
|-------|-------------|
| **CLC-001** | Solo Admin puede transicionar de `draft` a `pending_signature` |
| **CLC-002** | Solo Mifiel puede transicionar a `active` (v√≠a webhook) |
| **CLC-003** | Transici√≥n a `expired` es autom√°tica por sistema (cron job) |
| **CLC-004** | `cancelled` y `renewed` son estados finales irreversibles |
| **CLC-005** | Renovar un contrato `active` o `expired` crea un nuevo `draft` |

---

## Navegaci√≥n

| ‚¨ÜÔ∏è Padre             | [[Proyecto OnlyCarNLD/Datos/1.1.7 contratos_b2b]]            |
| -------------------- | ---------------------------------- |
| ‚û°Ô∏è Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/1.1.7.2 plantilla_contrato]]     |

---
