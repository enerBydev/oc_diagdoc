---
id: 7.1.4
title: Adaptadores Secundarios
parent: '7.1'
breadcrumb: 0 → 7.0 → 7.1 → 7.1.4
type: hoja
status: activo
last_updated: 2026-01-29 15:31
file_create: 2026-01-21 12:36
domain:
- hexagonal
- adapters
- repositories
- gateways
summary: Adaptadores que implementan los puertos outbound.
content_hash: e587a460f44e2a5a
---

# 7.1.4 Adaptadores Secundarios (Driven Adapters)

> Implementan las interfaces que el dominio necesita.

---

## Concepto

Los **adaptadores secundarios** implementan los puertos outbound, conectando el dominio con infraestructura real.

---

## Tipos en OnlyCar

| Adaptador | Implementa | Tecnología |
|-----------|------------|------------|
| `SupabaseCitaRepository` | `ICitaRepository` | Supabase |
| `DexieCitaRepository` | `ICitaRepository` | IndexedDB (offline) |
| `StripePaymentGateway` | `IPagoGateway` | Stripe API |
| `MercadoPagoGateway` | `IPagoGateway` | MercadoPago API |
| `CapacitorGeoService` | `IUbicacionService` | Capacitor GPS |

---

## Ejemplo: Repository

```typescript
// infrastructure/adapters/persistence/SupabaseCitaRepository.ts
import { SupabaseClient } from '@supabase/supabase-js';
import type { ICitaRepository } from '@/domain/ports/outbound/ICitaRepository';

export class SupabaseCitaRepository implements ICitaRepository {
  constructor(private supabase: SupabaseClient) {}
  
  async findById(id: string): Promise<Cita | null> {
    const { data, error } = await this.supabase
      .from('citas')
      .select('*, servicios(*), operador:operadores(*)')
      .eq('id', id)
      .single();
      
    if (error || !data) return null;
    return CitaMapper.toDomain(data);
  }
  
  async save(cita: Cita): Promise<void> {
    const dto = CitaMapper.toPersistence(cita);
    await this.supabase.from('citas').upsert(dto);
  }
}
```

---

## Navegación

| ⬆️ Padre | [[Proyecto OnlyCarNLD/Datos/7.1 Hexagonal_Architecture]] |
|----------|-------------------------------|
| ⬅️ Anterior | [[Proyecto OnlyCarNLD/Datos/7.1.3 Adapters_Primary]] |

---
