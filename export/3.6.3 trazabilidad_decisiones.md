---
id: 3.6.3
title: Trazabilidad de Decisiones
parent: '3.6'
breadcrumb: 0 → 3.0 → 3.6 → 3.6.3
type: hoja
status: activo
file_create: 2026-01-14 15:18
domain:
- logs
- auditoria
- blackbox
actors:
- sistema
- legal
summary: La "Caja Negra" del sistema. Registro inmutable de por qué la IA o el algoritmo
  tomó una decisión específica.
last_updated: 2026-01-29 15:31
content_hash: bc4accc7821e377a
---

# 3.6.3 Trazabilidad de Decisiones (Blackbox)

> **Principio:** Cada decisión automática debe ser explicable y auditable.

---

## Estructura del Log de Auditoría

Cada evento crítico genera un `DecisionRecord`.
> **Persistencia:** Se almacena en la tabla particionada `decision_logs`.
> Ver definición SQL: [[Proyecto OnlyCarNLD/Datos/3.1.4.8 Tablas_Quantum#decision_logs|3.1.4.8]]

```json
{
  "event_id": "uuid",
  "timestamp": "2026-01-14T15:00:00Z",
  "actor": "system:dynamic_pricing",
  "action": "JUMP_PRICE",
  "context": {
    "location": "NLD_CENTRO",
    "demand_factor": 1.5,
    "available_supply": 2
  },
  "decision": {
    "old_price": 290,
    "new_price": 435,
    "reason": "High demand, low supply"
  },
  "signature": "sha256_hash_of_payload"
}
```

---

## Ciclo de Vida del Dato

1.  **Captura:** Síncrona en el momento de la decisión.
2.  **Retención Caliente:** 30 días en base de datos operativa (para soporte).
3.  **Retención Fría:** 5 años en Cloudflare R2 (formato Parquet inmutable).
4.  **Purga:** Eliminación certificada post-5 años (salvo Flag Legal).

---

## Cadena de Custodia

*   Los logs son **Append-Only** (Solo lectura/escritura, nunca actualización).
*   Hash encadenado (Blockchain-lite style): El hash del evento N incluye el hash del evento N-1.

---

## Navegación

| ⬆️ Padre | [[Proyecto OnlyCarNLD/Datos/3.6. Auditoria_Logica]] |
|----------|---------------------------|
| ⬅️ Hermano | [[Proyecto OnlyCarNLD/Datos/3.6.2 deteccion_anomalias]] |
| ➡️ Hermano | NO |

---
