---
id: 1.3.14.3
title: Archivado Manual
parent: 1.3.14
breadcrumb: 0 â†’ 1.0 â†’ 1.3 â†’ 1.3.14 â†’ 1.3.14.3
type: feature
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-10 12:16
domain:
- chat
- admin
actors:
- admin
summary: Flujo para que Admin archive manualmente conversaciones desde el Hub.
content_hash: 42cecf204e9186f1
---

# 1.3.14.3 Archivado Manual

> Admin puede archivar conversaciones antes del perÃ­odo automÃ¡tico.

---

## Casos de Uso

| Caso | DescripciÃ³n |
|------|-------------|
| Spam resuelto | ConversaciÃ³n era spam, ya manejada |
| Cliente duplicado | Misma persona con mÃºltiples chats |
| Limpieza mensual | Admin organiza su Hub |
| ConversaciÃ³n sensible | Resguardar fuera del flujo activo |

---

## UI en Hub Admin

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¬ HUB DE CHAT â€” Juan GarcÃ­a                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [ConversaciÃ³n seleccionada]                                    â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                 â”‚
â”‚  Clic derecho o menÃº â‹®:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ ğŸ“Œ Fijar arriba         â”‚                                    â”‚
â”‚  â”‚ ğŸ”” Silenciar            â”‚                                    â”‚
â”‚  â”‚ ğŸ“ Archivar             â”‚  â† OPCIÃ“N                          â”‚
â”‚  â”‚ ğŸš« Marcar como spam     â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Modal de ConfirmaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ARCHIVAR CONVERSACIÃ“N                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Â¿EstÃ¡s seguro de archivar esta conversaciÃ³n?                   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“± Juan GarcÃ­a                                                 â”‚
â”‚  ğŸ“… Ãšltimo mensaje: Hace 5 dÃ­as                                 â”‚
â”‚  ğŸ’¬ 45 mensajes                                                 â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ La conversaciÃ³n desaparecerÃ¡ del Hub principal.             â”‚
â”‚     PodrÃ¡s encontrarla en la secciÃ³n "Archivados".              â”‚
â”‚     Puedes reactivarla en los prÃ³ximos 7 dÃ­as.                  â”‚
â”‚                                                                 â”‚
â”‚  RazÃ³n (opcional):                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ConversaciÃ³n duplicada                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  [ Cancelar ]                    [ Archivar ]                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Proceso Backend

```typescript
// server/api/admin/conversations/[id]/archive.post.ts
export default defineEventHandler(async (event) => {
  const { id } = event.context.params;
  const { reason } = await readBody(event);
  const adminId = event.context.auth.userId;
  
  // Validar permisos
  if (!hasPermission(adminId, 'archive_conversations')) {
    throw createError({ statusCode: 403, message: 'Sin permisos' });
  }
  
  // Validar conversaciÃ³n
  const conversation = await getConversation(id);
  if (!conversation) {
    throw createError({ statusCode: 404, message: 'ConversaciÃ³n no encontrada' });
  }
  
  if (conversation.status === 'archivada') {
    throw createError({ statusCode: 400, message: 'Ya estÃ¡ archivada' });
  }
  
  // Archivar
  await archiveConversation(id, {
    reason: reason || 'manual',
    archivedBy: adminId,
    reactivationDeadline: addDays(new Date(), 7),
  });
  
  // Log
  await logAudit('conversation_archived_manual', id, adminId, { reason });
  
  return { success: true, message: 'ConversaciÃ³n archivada' };
});
```

---

## ReactivaciÃ³n

Admin puede reactivar una conversaciÃ³n archivada manualmente dentro de 7 dÃ­as:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‚ CONVERSACIONES ARCHIVADAS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  FILTROS: [Manual â–¼] [Ãšltimos 7 dÃ­as â–¼]                         â”‚
â”‚                                                                 â”‚
â”‚  â”‚ Cliente        â”‚ Archivado  â”‚ RazÃ³n       â”‚ AcciÃ³n         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Juan GarcÃ­a    â”‚ Hace 2 dÃ­asâ”‚ Duplicado   â”‚ [Reactivar]    â”‚ â”‚
â”‚  â”‚ MarÃ­a LÃ³pez    â”‚ Hace 5 dÃ­asâ”‚ Spam        â”‚ [Reactivar]    â”‚ â”‚
â”‚  â”‚ Pedro RamÃ­rez  â”‚ Hace 8 dÃ­asâ”‚ Manual      â”‚ Expirado       â”‚ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## NavegaciÃ³n

| â¬†ï¸ Padre | [[Proyecto OnlyCarNLD/Datos/1.3.14 archivado_chats]] |
|----------|---------------------------|
| â¬…ï¸ Hermano anterior | [[Proyecto OnlyCarNLD/Datos/1.3.14.2 archivado_automatico]] |
| â¡ï¸ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/1.3.14.4 purga_programada]] |

---
