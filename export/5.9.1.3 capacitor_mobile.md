---
id: 5.9.1.3
title: Capacitor Mobile
parent: 5.9.1
breadcrumb: 0 → 5.0 → 5.9 → 5.9.1 → 5.9.1.3
type: hoja
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-03 00:57
domain:
- tawk
- capacitor
- mobile
actors:
- desarrollador
summary: 'Integración de Tawk.to en la app nativa Capacitor (iOS/Android).

  Usa Direct Chat Link con @capacitor/browser.'
content_hash: 9c516b63117bc512
---

# 5.9.1.3 Capacitor Mobile

> Integración de Tawk.to en la aplicación móvil nativa (Capacitor).

---

## Método Recomendado: Direct Chat Link

Tawk.to recomienda usar **Direct Chat Link** para apps móviles en lugar del widget embebido.

### ¿Por qué?

| Razón | Detalle |
|-------|---------|
| **Compatibilidad** | Evita problemas de WebView |
| **Experiencia** | Chat nativo en browser |
| **Oficial** | Recomendación de Tawk.to |

---

## Instalación

```bash
npm install @capacitor/browser
npx cap sync
```

---

## Implementación

### Composable para Mobile

```typescript
// composables/useTawkMobile.ts
import { Browser } from '@capacitor/browser'
import { Capacitor } from '@capacitor/core'

export const useTawkMobile = () => {
  const config = useRuntimeConfig()
  const propertyId = config.public.tawkPropertyId
  const widgetId = config.public.tawkWidgetId || 'default'
  
  const directChatUrl = computed(() => 
    `https://tawk.to/chat/${propertyId}/${widgetId}`
  )
  
  const openChat = async () => {
    // En web, usar el widget normal
    if (!Capacitor.isNativePlatform()) {
      const { open } = useTawkChat()
      open()
      return
    }
    
    // En nativo, abrir Direct Link
    await Browser.open({
      url: directChatUrl.value,
      presentationStyle: 'popover' // iOS: modal
    })
  }
  
  const openChatInApp = async () => {
    // Alternativa: In-App Browser
    await Browser.open({
      url: directChatUrl.value,
      windowName: '_blank',
      toolbarColor: '#1E40AF' // Color OnlyCar
    })
  }
  
  return {
    directChatUrl,
    openChat,
    openChatInApp
  }
}
```

---

## Uso en App Nativa

### Botón de Soporte en App

```vue
<!-- components/mobile/SupportButton.vue -->
<script setup lang="ts">
const { openChat } = useTawkMobile()
</script>

<template>
  <UButton
    icon="i-heroicons-chat-bubble-left-right"
    color="primary"
    size="lg"
    block
    @click="openChat"
  >
    Contactar Soporte
  </UButton>
</template>
```

### Botón Flotante (FAB)

```vue
<!-- components/mobile/SupportFAB.vue -->
<script setup lang="ts">
const { openChat } = useTawkMobile()
</script>

<template>
  <div class="fixed bottom-20 right-4 z-50">
    <UButton
      icon="i-heroicons-chat-bubble-oval-left-ellipsis"
      color="primary"
      size="xl"
      :ui="{ rounded: 'rounded-full' }"
      @click="openChat"
    />
  </div>
</template>
```

---

## Configuración por Plataforma

### Android

No requiere configuración adicional. `@capacitor/browser` usa Chrome Custom Tabs.

### iOS

Agregar a `Info.plist` si usas URL schemes:

```xml
<key>LSApplicationQueriesSchemes</key>
<array>
  <string>https</string>
</array>
```

---

## Pre-rellenar Datos del Usuario

Si el usuario está logueado en la app, puedes pasar sus datos:

```typescript
const openChatWithUser = async () => {
  const user = useSupabaseUser()
  
  const params = new URLSearchParams({
    name: user.value?.user_metadata?.full_name || '',
    email: user.value?.email || ''
  })
  
  await Browser.open({
    url: `${directChatUrl.value}?${params.toString()}`
  })
}
```

---

## Dónde Mostrar el Botón

| Pantalla | Mostrar | Tipo |
|----------|---------|------|
| Home (landing) | ✅ | Widget web o FAB |
| Menú/Settings | ✅ | Botón en lista |
| Perfil | ✅ | Enlace "Ayuda" |
| Dashboard operador | ❌ | Usa chat interno |
| Chat con cliente | ❌ | Ya en conversación |

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/5.9.1 tawk_live_chat]]          |
| -------------------- | --------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/5.9.1.2 integracion_nuxt]]      |

---
