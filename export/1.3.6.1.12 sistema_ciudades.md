---
id: 1.3.6.1.12
title: Sistema de Ciudades
parent: 1.3.6.1
breadcrumb: 0 â†’ 1.0 â†’ 1.3 â†’ 1.3.6 â†’ 1.3.6.1 â†’ 1.3.6.1.12
type: padre
status: activo
domain: comunicacion
summary: Arquitectura multi-ciudad escalable con principio de localidad estricta.
  Operador y cliente pertenecen a UNA ciudad.
version: 1.0
last_updated: 2026-01-29 15:31
file_create: 2025-12-26 15:14
children_count: 3
actors:
- admin
- sistema
dependencies:
- supabase
affects:
- 1.3.6.1 asignacion_citas
content_hash: e58655139e59a07e
---

# 1.3.6.1.12 Sistema de Ciudades

Arquitectura multi-ciudad escalable para operaciÃ³n nacional.

---

## FilosofÃ­a

> [!IMPORTANT]
> **Principio de Localidad Estricta**
> 
> - Operador pertenece a **UNA** ciudad
> - Cliente pertenece a **UNA** ciudad
> - Solicitud â†’ Solo operadores de **ESA MISMA** ciudad
> - **NUNCA** operadores de ciudades vecinas o cercanas

---

## Arquitectura

```mermaid
flowchart TD
    subgraph MEXICO[ğŸ‡²ğŸ‡½ MÃ©xico]
        subgraph NL[Nuevo LeÃ³n]
            MTY[Monterrey]
            SPG[San Pedro Garza GarcÃ­a]
        end
        
        subgraph TAM[Tamaulipas]
            NLD[Nuevo Laredo]
            REY[Reynosa]
            MAT[Matamoros]
        end
        
        subgraph COAH[Coahuila]
            TOR[TorreÃ³n]
            SAL[Saltillo]
        end
    end
    
    subgraph FLUJO[Flujo de Solicitud]
        A[Cliente en NLD] --> B{Â¿Ciudad?}
        B --> C[Nuevo Laredo]
        C --> D[Solo operadores NLD]
        D --> E[Broadcast]
    end
    
    NLD -.-> C
```

---

## ComparaciÃ³n: Zonas vs Ciudades

| Concepto | Zonas (antes) | Ciudades (nuevo) |
|----------|---------------|------------------|
| **PropÃ³sito** | DivisiÃ³n interna | Filtro principal |
| **Pertenencia** | Operador en N zonas | Operador en 1 ciudad |
| **Overlap** | Zonas pueden traslaparse | Ciudades NO |
| **Tarifa** | Tarifa extra por zona | N/A para ciudad |
| **Obligatoriedad** | Opcional | OBLIGATORIO |

> [!TIP]
> Las **zonas** (Centro, Norte, Sur) siguen existiendo DENTRO de una ciudad para tarifas adicionales y preferencias. La **ciudad** es el filtro macro obligatorio.

---

## Flujo de Matching Actualizado

```
ANTES:
  Zona â†’ Disponibilidad â†’ CapacitaciÃ³n â†’ Rating â†’ Broadcast

AHORA:
  CIUDAD â†’ Zona â†’ Disponibilidad â†’ Servicios Preferidos â†’ Rating â†’ Broadcast
    â†‘
    â””â”€ NUEVO: Filtro mÃ¡s restrictivo, primero
```

---

## Escalabilidad

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CRECIMIENTO PROYECTADO                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  FASE 1 (Actual):                                               â”‚
â”‚  â€¢ 1 ciudad: Nuevo Laredo, Tamaulipas                           â”‚
â”‚  â€¢ N operadores registrados en NLD                              â”‚
â”‚                                                                 â”‚
â”‚  FASE 2 (6 meses):                                              â”‚
â”‚  â€¢ +3 ciudades: Reynosa, Matamoros, Laredo TX (especial)        â”‚
â”‚  â€¢ Operadores independientes por ciudad                         â”‚
â”‚                                                                 â”‚
â”‚  FASE 3 (1 aÃ±o):                                                â”‚
â”‚  â€¢ +10 ciudades: Monterrey, Saltillo, TorreÃ³n, etc.             â”‚
â”‚  â€¢ Sistema de admins regionales                                 â”‚
â”‚                                                                 â”‚
â”‚  FASE 4 (2 aÃ±os):                                               â”‚
â”‚  â€¢ Nacional: 50+ ciudades                                       â”‚
â”‚  â€¢ Franquicias por ciudad                                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Zonas vs Ciudades

| Concepto | Zonas | Ciudades |
|----------|-------|----------|
| **PropÃ³sito** | DivisiÃ³n interna | Filtro principal |
| **Pertenencia** | Operador en N zonas | Operador en 1 ciudad |
| **Overlap** | Pueden traslaparse | NO |
| **Obligatoriedad** | Opcional | OBLIGATORIO |

---

## Estructura de Hijos

| ID                                                        | Nombre     | DescripciÃ³n | Estado |
| --------------------------------------------------------- | ---------- | ----------- | ------ |
| [[Proyecto OnlyCarNLD/Datos/1.3.6.1.12.1 modelo_ciudades\|1.3.6.1.12.1]]            | Modelo     | BD ciudades | âœ…      |
| [[Proyecto OnlyCarNLD/Datos/1.3.6.1.12.2 asignacion_operador_ciudad\|1.3.6.1.12.2]] | AsignaciÃ³n | Opâ†’Ciudad   | âœ…      |
| [[Proyecto OnlyCarNLD/Datos/1.3.6.1.12.3 filtro_solicitud_ciudad\|1.3.6.1.12.3]]    | Filtro     | En matching | âœ…      |

---

## NavegaciÃ³n

| â¬†ï¸ Padre             | [[Proyecto OnlyCarNLD/Datos/1.3.6.1 asignacion_citas]]            |
| -------------------- | --------------------------------------- |
| â¬…ï¸ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/1.3.6.1.11 preferencias_servicios]]   |
| â¡ï¸ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/1.3.6.1.13 inventario_herramientas]]  |

---
