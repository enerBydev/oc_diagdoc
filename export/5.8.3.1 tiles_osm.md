---
id: 5.8.3.1
title: Tiles OSM
parent: 5.8.3
breadcrumb: 0 → 5.0 → 5.8 → 5.8.3 → 5.8.3.1
type: configuracion
status: activo
last_updated: 2026-01-29 15:31
file_create: 2026-01-01 18:10
domain:
- tiles
- osm
- mapas
summary: Configuración de tiles OpenStreetMap.
content_hash: e0e474d297115eea
---

# 5.8.3.1 Tiles OpenStreetMap

Configuración de tiles de mapa gratuitos.

---

## Proveedores Gratuitos

| Proveedor            | URL                                                                     | Uso            |
| -------------------- | ----------------------------------------------------------------------- | -------------- |
| **OSM (Principal)**  | `https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png`                    | General        |
| **OSM Humanitarian** | `https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png`                 | Alto contraste |
| **CartoDB Light**    | `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png`           | Tema claro     |
| **CartoDB Dark**     | `https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png`            | Tema oscuro    |
| **CartoDB Voyager**  | `https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png` | Colorido       |

---

## Implementación

```typescript
// config/tiles.ts
export const TILE_CONFIG = {
  // Proveedor principal
  default: {
    url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
    attribution: '© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
  },
  
  // Para dark mode
  dark: {
    url: 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',
    attribution: '© CartoDB © OSM contributors'
  },
  
  // Opciones comunes
  options: {
    maxZoom: 19,
    minZoom: 3,
    tileSize: 256,
    crossOrigin: true
  }
};
```

---

## Composable de Tiles

```typescript
// composables/useTileLayer.ts
import L from 'leaflet';
import { TILE_CONFIG } from '~/config/tiles';

export const useTileLayer = (map: L.Map) => {
  const colorMode = useColorMode();
  let currentLayer: L.TileLayer | null = null;
  
  const setTileLayer = (theme: 'light' | 'dark' = 'light') => {
    // Remover layer anterior
    if (currentLayer) {
      map.removeLayer(currentLayer);
    }
    
    // Añadir nuevo layer
    const config = theme === 'dark' ? TILE_CONFIG.dark : TILE_CONFIG.default;
    
    currentLayer = L.tileLayer(config.url, {
      ...TILE_CONFIG.options,
      attribution: config.attribution
    }).addTo(map);
    
    return currentLayer;
  };
  
  // Cambiar automáticamente con color mode
  watch(colorMode, (mode) => {
    setTileLayer(mode.value as 'light' | 'dark');
  });
  
  return { setTileLayer };
};
```

---

## Caché de Tiles (Offline)

```typescript
// Para soporte offline, usar Service Worker
// plugin/sw-tiles.ts

// En el Service Worker
self.addEventListener('fetch', (event) => {
  const url = event.request.url;
  
  // Solo cachear tiles de OSM
  if (url.includes('tile.openstreetmap.org')) {
    event.respondWith(
      caches.open('osm-tiles-v1').then(async (cache) => {
        const cached = await cache.match(event.request);
        if (cached) return cached;
        
        const response = await fetch(event.request);
        // Cachear solo respuestas exitosas
        if (response.ok) {
          cache.put(event.request, response.clone());
        }
        return response;
      })
    );
  }
});
```

---

## Políticas de Uso

> [!IMPORTANT]
> **OpenStreetMap Tile Usage Policy:**
> - Máximo 2 requests/segundo
> - User-Agent válido requerido
> - No scraping masivo
> - Atribuir correctamente
> 
> **Para producción de alto volumen:**
> Considerar servidor propio de tiles o proveedor comercial.

---

## Optimizaciones

```typescript
// Precargar tiles del área de servicio (Nuevo Laredo)
const preloadTiles = (map: L.Map) => {
  const bounds = L.latLngBounds(
    [27.4, -99.6],  // SW de Nuevo Laredo
    [27.6, -99.4]   // NE de Nuevo Laredo
  );
  
  // Precargar niveles de zoom 12-16
  for (let z = 12; z <= 16; z++) {
    const tiles = getTilesInBounds(bounds, z);
    tiles.forEach(tile => {
      const img = new Image();
      img.src = `https://a.tile.openstreetmap.org/${z}/${tile.x}/${tile.y}.png`;
    });
  }
};
```

---

→ Ver markers: [[Proyecto OnlyCarNLD/Datos/5.8.3.2 markers_dinamicos]]

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/5.8.3 mapas_visualizacion]]            |
| -------------------- | ---------------------- |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/5.8.3.2 markers_dinamicos]]              |
