---
id: 3.4.5
title: Versionado Esquema
parent: '3.4'
breadcrumb: 0 → 3.0 → 3.4 → 3.4.5
type: especificacion
status: activo
domain:
- versionado
- sql
- semver
summary: Política de versionado del esquema de base de datos para mantener compatibilidad
  con versiones antiguas de la App Móvil.
last_updated: 2026-01-29 15:31
content_hash: 76f715fd586626d0
---

# 3.4.5 Versionado de Esquema

> Gestión de la evolución de la base de datos sin romper clientes existentes.

---

## El Problema de las Apps Móviles
A diferencia de la Web, no podemos forzar a todos los usuarios a actualizar su App Android/iOS inmediatamente.
Si cambiamos el nombre de una columna en la DB (`name` -> `full_name`), las apps viejas que pidan `name` crashearán.

---

## Estrategia: "Expand and Contract"

Para cambios destructivos (breaking changes), seguimos 3 pasos:

### 1. Expand (Expansión)
Añadir la nueva columna, pero mantener la vieja sincronizada con un Trigger.
- DB tiene `name` (viejo) y `full_name` (nuevo).
- Trigger: Al escribir en `name`, copiar a `full_name` y viceversa.
- App Nueva: Lee `full_name`.
- App Vieja: Lee `name`.

### 2. Migrate (Migración)
Esperar a que el 90% de usuarios tengan la App Nueva (aprox. 1-2 meses).
Usar "Force Update" para los rezagados.

### 3. Contract (Contracción)
Eliminar la columna vieja `name` y el trigger.
Ahora la DB está limpia de nuevo.

---

## Navegación2

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/3.4. Administracion_DB]] |
| -------------------- | -------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/3.4.4 Disaster_Recovery]] |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.4.6 Modelo_ER_Global]] |

---
