---
id: 3.1.7
title: Sistema de Costos
parent: '3.1'
breadcrumb: 0 → 3.0 → 3.1 → 3.1.7
type: modulo_padre
children_count: 8
descendants_count: 22
status: activo
last_updated: 2026-01-29 15:32
file_create: 2025-12-27 14:01
domain:
- costos
- margenes
- rentabilidad
actors:
- admin
summary: 'Sistema para calcular costos de producción, márgenes y rentabilidad.

  Incluye recomendador de precios y dashboard de KPIs financieros.'
content_hash: fb057e31cbc911bb
---

# 3.1.7 Sistema de Costos

Sistema para calcular costos de producción, márgenes y rentabilidad.

---

## Propósito

> [!IMPORTANT]
> **Determinar el costo real de cada servicio**
> 
> Sin conocer los costos, es imposible saber si los precios son rentables.

---

## Arquitectura

```
┌─────────────────────────────────────────────────────────────────┐
│  SISTEMA DE COSTOS                                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ENTRADA:                                                       │
│  ├── Materiales consumibles ($)                                 │
│  ├── Tiempo operador (min → $)                                  │
│  ├── Desgaste equipo (%)                                        │
│  └── Gastos indirectos (%)                                      │
│                                                                 │
│  PROCESAMIENTO:                                                 │
│  ├── Sumar todos los costos                                     │
│  ├── Calcular costo total por servicio                          │
│  └── Comparar vs precio de venta                                │
│                                                                 │
│  SALIDA:                                                        │
│  ├── Margen de ganancia (%)                                     │
│  ├── Alertas si margen < mínimo                                 │
│  └── Precio recomendado                                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Fórmula Principal

```typescript
const calcularCostoServicio = (servicio: Servicio): CostoDetallado => {
  const materiales = servicio.materiales.reduce((sum, m) => sum + m.costo, 0);
  const tiempo = servicio.duracionMinutos * COSTO_MINUTO_OPERADOR;
  const desgaste = servicio.equipoRequerido.reduce((sum, e) => 
    sum + (e.precioCompra * e.porcentajeDesgastePorUso), 0);
  const indirectos = (materiales + tiempo) * FACTOR_GASTOS_INDIRECTOS;
  
  const costoTotal = materiales + tiempo + desgaste + indirectos;
  const precioVenta = servicio.precioBase;
  const margen = ((precioVenta - costoTotal) / precioVenta) * 100;
  
  return { materiales, tiempo, desgaste, indirectos, costoTotal, margen };
};
```

---

## Estructura de Hijos

| ID                                          | Nombre                 | Descripción           | Nietos | Estado |
| ------------------------------------------- | ---------------------- | --------------------- | ------ | ------ |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.1 costos_produccion\|3.1.7.1]]      | Costos Producción      | Desglose de costos    | 0 | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.2 margenes_ganancia\|3.1.7.2]]      | Márgenes Ganancia      | Análisis rentabilidad | 0 | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.3 recomendador_precios\|3.1.7.3]]   | Recomendador Precios   | Precios óptimos       | 0 | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.4 dashboard_rentabilidad\|3.1.7.4]] | Dashboard Rentabilidad | KPIs y alertas        | 0 | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.5 estrategia_precios_unificada\|3.1.7.5]] | Estrategia Precios     | Lógica unificada      | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.6 esquema_sql_costos\|3.1.7.6]]     | Esquema SQL            | Tablas de costos      | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.7 api_costos\|3.1.7.7]]             | API Costos             | Endpoints CRUD        | 0      | ✅      |
| [[Proyecto OnlyCarNLD/Datos/3.1.7.8 json_costos_ejemplo\|3.1.7.8]]    | JSON Ejemplo           | Referencia config     | 0      | ✅      |

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/3.1. Logica_Negocio_Core]]                   |
| -------------------- | ------------------------------------ |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/3.1.6 datos_iniciales_seed]]       |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/3.1.8 sistema_remuneracion]]       |

---
