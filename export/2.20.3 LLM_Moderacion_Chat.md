---
id: 2.20.3
title: LLM Moderación Chat
parent: '2.20'
breadcrumb: 0 → 2.0 → 2.20 → 2.20.3
type: arquitectura
status: futuro
domain:
- ai
- nlp
- llm
- chat
- seguridad
summary: Uso de Modelos de Lenguaje (LLM) para moderar conversaciones en tiempo real,
  detectar fraude y disintermediación.
last_updated: 2026-01-29 15:31
content_hash: 82d0d205d6cbccc4
---

# 2.20.3 LLM Moderación Chat

> **[FUTURO]** Guardianes conversacionales automatizados para proteger el negocio y a los usuarios.

---

## Objetivos de Moderación

El chat entre Cliente y Operador es un vector de riesgo. La IA monitorea en busca de:

1.  **Disintermediación (Leakage):** "Pásame tu WhatsApp", "Te pago por fuera", "Cancela y nos arreglamos".
2.  **Toxicidad:** Insultos, acoso, lenguaje inapropiado.
3.  **Seguridad:** Intercambio de datos sensibles no necesarios.

---

## Arquitectura de Procesamiento

Para no añadir latencia al envío de mensajes (UX), la moderación es **Asíncrona**.

```mermaid
sequenceDiagram
    participant User
    participant Supabase
    participant EdgeWorker
    participant OpenAI

    User->>Supabase: Envía Mensaje (INSERT)
    Supabase-->>User: Ack (Mensaje "Enviado")
    
    par Async Process
        Supabase->>EdgeWorker: Webhook (database-change)
        EdgeWorker->>OpenAI: Moderation API / Completion
        OpenAI-->>EdgeWorker: Flag: { leakage: true, confidence: 0.98 }
        
        alt isFlagged
            EdgeWorker->>Supabase: UPDATE mensaje SET flags = 'leakage'
            EdgeWorker->>Supabase: INSERT alerta_admin
        end
    end
```

---

## Lógica de Negocio

### Reacción ante "Leakage"
*   **Primer aviso:** Mensaje automático del sistema en el chat: *"Por tu seguridad, mantén los pagos y comunicación dentro de OnlyCar."*
*   **Reincidencia:** Shadowban temporal o bloqueo de chat.

### Reacción ante Toxicidad
*   **Alta Confianza:** Ocultar mensaje automáticamente (Blur) con botón "Mostrar mensaje potencialmente ofensivo".
*   **Notificación:** Alerta inmediata al equipo de Soporte ([[Proyecto OnlyCarNLD/Datos/1.6.3 gestion_incidencias]]).

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.20. Arquitectura_IA_Biometria]] |
| -------------------- | ----------------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.20.2 AI_Vision_Vehicular]]      |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/2.20.4 Edge_AI_Processing]]       |

---
