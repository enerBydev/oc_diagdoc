---
id: 1.4.2.1
title: Widget de Testimonios
parent: 1.4.2
breadcrumb: 0 → 1.0 → 1.4 → 1.4.2 → 1.4.2.1
type: feature
status: activo
last_updated: 2026-01-29 15:32
file_create: 2026-01-10 01:12
domain:
- marketing
- testimonios
- web
actors:
- visitante
- admin
summary: Componente Vue embebible para mostrar testimonios en landing pages. Carousel,
  API pública, cache CDN.
content_hash: 09617a056bb5b102
---

# 1.4.2.1 Widget de Testimonios

> Componente para mostrar testimonios aprobados en el sitio web y landing pages.

---

## Propósito

| Objetivo | Descripción |
|----------|-------------|
| **Credibilidad** | Social proof para visitantes |
| **Conversión** | Aumentar tasa de registro |
| **SEO** | Contenido fresco y relevante |

---

## Componente Vue

```vue
<!-- components/testimonios/TestimonioCarousel.vue -->
<template>
  <div class="testimonio-carousel">
    <h2 class="text-2xl font-bold text-center mb-8">
      Lo que dicen nuestros clientes
    </h2>
    
    <Carousel 
      :items-to-show="itemsToShow"
      :autoplay="5000"
      :wrap-around="true"
    >
      <Slide v-for="t in testimonios" :key="t.id">
        <TestimonioCard :testimonio="t" />
      </Slide>
      
      <template #addons>
        <Navigation />
        <Pagination />
      </template>
    </Carousel>
  </div>
</template>

<script setup lang="ts">
interface Testimonio {
  id: string;
  texto: string;
  estrellas: number;
  nombre_display: string;
  servicio_nombre: string;
  fecha: string;
  avatar_url?: string;
}

const { data: testimonios } = await useFetch<Testimonio[]>(
  '/api/testimonios/publicos',
  { 
    query: { limit: 10 },
    transform: (data) => data.filter(t => t.estrellas >= 4),
  }
);

const itemsToShow = computed(() => {
  if (process.client) {
    return window.innerWidth < 768 ? 1 : window.innerWidth < 1024 ? 2 : 3;
  }
  return 3;
});
</script>

<style scoped>
.testimonio-carousel {
  @apply py-12 px-4 bg-gradient-to-br from-primary-50 to-white;
}
</style>
```

---

## Testimonio Card

```vue
<!-- components/testimonios/TestimonioCard.vue -->
<template>
  <div class="testimonio-card">
    <div class="estrellas">
      <Star 
        v-for="i in 5" 
        :key="i"
        :class="i <= testimonio.estrellas ? 'text-yellow-400' : 'text-gray-300'"
        :fill="i <= testimonio.estrellas ? 'currentColor' : 'none'"
      />
    </div>
    
    <blockquote class="texto">
      "{{ testimonio.texto }}"
    </blockquote>
    
    <div class="autor">
      <Avatar :src="testimonio.avatar_url" :alt="testimonio.nombre_display" />
      <div>
        <p class="nombre">{{ testimonio.nombre_display }}</p>
        <p class="servicio">{{ testimonio.servicio_nombre }}</p>
      </div>
    </div>
  </div>
</template>

<style scoped>
.testimonio-card {
  @apply bg-white rounded-xl shadow-lg p-6 mx-2;
  @apply border border-gray-100;
  @apply transition-transform hover:scale-[1.02];
}

.estrellas {
  @apply flex gap-1 mb-4;
}

.texto {
  @apply text-gray-700 italic mb-4 line-clamp-4;
}

.autor {
  @apply flex items-center gap-3;
}

.nombre {
  @apply font-semibold text-gray-900;
}

.servicio {
  @apply text-sm text-gray-500;
}
</style>
```

---

## API Endpoint

```typescript
// server/api/testimonios/publicos.get.ts
export default defineEventHandler(async (event) => {
  const query = getQuery(event);
  const limit = parseInt(query.limit as string) || 10;
  
  const testimonios = await db
    .select({
      id: testimoniosTable.id,
      texto: testimoniosTable.texto_final,
      estrellas: testimoniosTable.estrellas,
      nombre_display: testimoniosTable.nombre_display,
      servicio_nombre: testimoniosTable.servicio_nombre,
      fecha: testimoniosTable.publicado_at,
    })
    .from(testimoniosTable)
    .where(eq(testimoniosTable.estado, 'publicado'))
    .orderBy(desc(testimoniosTable.publicado_at))
    .limit(limit);
  
  // Cache 1 hora
  setResponseHeader(event, 'Cache-Control', 'public, max-age=3600');
  
  return testimonios;
});
```

---

## Integración Landing Pages

```vue
<!-- pages/index.vue -->
<template>
  <div>
    <HeroSection />
    <ServiciosSection />
    
    <!-- Widget de Testimonios -->
    <LazyTestimonioCarousel />
    
    <CTASection />
  </div>
</template>
```

---

## CDN y Cache

| Capa | TTL | Invalidación |
|------|-----|--------------|
| Edge (Cloudflare) | 1 hora | Purge on publish |
| Nuxt Server | 5 min | ISR |
| Browser | 1 hora | Cache-Control |

```typescript
// nuxt.config.ts
routeRules: {
  '/api/testimonios/publicos': {
    swr: 300, // 5 min
    cache: {
      maxAge: 3600, // 1 hora
    },
  },
},
```

---

## Variantes de Embebido

### Full Carousel

```html
<TestimonioCarousel />
```

### Single Featured

```html
<TestimonioFeatured :id="'uuid-del-mejor'" />
```

### Minimal List

```html
<TestimonioList :limit="3" :compact="true" />
```

### Stats Only

```html
<TestimonioStats />
<!-- Muestra: "⭐ 4.8 promedio | 500+ clientes satisfechos" -->
```

---

## Analytics

| Evento | Trigger | Datos |
|--------|---------|-------|
| `testimonios_viewed` | Carousel entra en viewport | count, page |
| `testimonios_clicked` | Click en card | testimonio_id |
| `testimonios_converted` | Registro después de ver | testimonio_id, page |

---

## Navegación

| ⬆️ Padre | [[Proyecto OnlyCarNLD/Datos/1.4.2 testimonios_marketing]] |
|----------|---------------------------------|
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/1.4.2.2 publicacion_redes]] |

---
