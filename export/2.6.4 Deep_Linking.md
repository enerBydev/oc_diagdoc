---
id: 2.6.4
title: Deep Linking
parent: '2.6'
breadcrumb: 0 → 2.0 → 2.6 → 2.6.4
type: arquitectura
status: activo
domain:
- mobile
- ios
- android
- deep-linking
- routing
summary: Estrategia de Deep Links (Universal Links iOS, App Links Android) para redirigir
  URLs web directamente a la App y manejar rutas internas.
last_updated: 2026-01-29 15:31
content_hash: 2185b69d38be276a
---

# 2.6.4 Deep Linking

> Integración profunda con el sistema operativo para manejo de URLs.

---

## Estrategia General

Utilizamos **Universal Links** (iOS) y **App Links** (Android) para que las URLs de `https://onlycar.mx/*` se abran nativamente en la app si está instalada.

---

## 1. Configuración del Servidor Web
Para verificar la propiedad del dominio, debemos alojar archivos de asociación en el root del sitio público.

### iOS (`apple-app-site-association`)
Ruta: `/.well-known/apple-app-site-association`
Formato: JSON sin extensión.

```json
{
  "applinks": {
    "apps": [],
    "details": [
      {
        "appID": "TEAMID.mx.onlycar.app",
        "paths": [ "/app/*", "/servicio/*" ]
      }
    ]
  }
}
```

### Android (`assetlinks.json`)
Ruta: `/.well-known/assetlinks.json`

```json
[
  {
    "relation": ["delegate_permission/common.handle_all_urls"],
    "target": {
      "namespace": "android_app",
      "package_name": "mx.onlycar.app",
      "sha256_cert_fingerprints": ["BASE64_FINGERPRINT..."]
    }
  }
]
```

---

## 2. Manejo en la App (Capacitor)

Usamos el plugin `@capacitor/app` para escuchar el evento `appUrlOpen`.

```typescript
// app.vue o layout principal
import { App } from '@capacitor/app';

App.addListener('appUrlOpen', data => {
  const url = new URL(data.url);
  const path = url.pathname;
  
  // Lógica de ruteo interno
  if (path.includes('/app/')) {
    navigateTo(path.replace('/app', ''));
  }
});
```

---

## 3. Deferred Deep Linking (Instalaciones Nuevas)
Si el usuario NO tiene la app y hace click en un link:
1.  Se abre la web.
2.  La web detecta dispositivo móvil y muestra Banner "Abrir en App".
3.  Si instala, usamos **AppsFlyer** o parámetros en el store para recuperar el contexto (ej. código de referido) tras el primer lanzamiento.

---

## Casos de Uso
1.  **Recuperación de Contraseña**: Link en email abre pantalla de "Nueva Contraseña" en app.
2.  **Tracking de Servicio**: Link SMS "Tu operador llegó" abre el mapa en tiempo real.
3.  **Compartir Perfil**: Link a perfil de operador.

---

## Navegación

| ⬆️ Padre             | [[Proyecto OnlyCarNLD/Datos/2.6. Arquitectura_Mobile]] |
| -------------------- | ---------------------------- |
| ⬅️ Hermano anterior  | [[Proyecto OnlyCarNLD/Datos/2.6.3 Build_Release]]      |
| ➡️ Hermano siguiente | [[Proyecto OnlyCarNLD/Datos/2.6.5 Gestion_Updates]]    |

---
